{"version":3,"sources":["../../../src/metadata/index.ts","../../../src/readable/asset/index.ts"],"names":["getTagType","action","handleMetadata","handlers","extractAsset","res","m","extractNFT"],"mappings":";;;CAQO,SAASA,CAAAA,CAAWC,EAAgB,CAC1C,OAAO,GAAGA,CAAO,CAAA,GAAG,CAAIA,CAAAA,EAAAA,CAAAA,CAAO,IAAI,CAAA,CACpC,CAEO,SAASC,CAAAA,CAAeD,EAAgBE,CAA6B,CAAA,CAE3EA,EAASH,CAAWC,CAAAA,CAAM,CAAC,CAAA,GAAIA,CAAO,CAAA,QAAe,EACtD,CCEO,SAASG,EAAaH,CAAgB,CAAA,CAC5C,IAAII,CAEJ,CAAA,OAAAH,CAAeD,CAAAA,CAAAA,CAAQ,CACtB,sBAAA,CAAyBK,GAAM,CAC9BD,CAAAA,CAAME,EAAWD,CAAC,EACnB,EACA,sBAAyBA,CAAAA,CAAAA,EAAM,CAC9BD,CAAAA,CAAME,CAAWD,CAAAA,CAAC,EACnB,CACA,CAAA,kBAAA,CAAqBA,GAAM,CAC1BD,CAAAA,CAAME,EAAWD,CAAC,EACnB,CACA,CAAA,kBAAA,CAAqBA,CAAM,EAAA,CAC1BD,EAAME,CAAWD,CAAAA,CAAC,EACnB,CACA,CAAA,mBAAA,CAAsBA,GAAM,CAC3BD,CAAAA,CAAME,CAAWD,CAAAA,CAAC,EACnB,CACD,CAAC,CAEMD,CAAAA,CACR,CAEO,SAASE,CAAAA,CACfD,EACC,CACD,OAAO,CACN,OAAA,CAASA,CAAE,CAAA,OAAA,CACX,GAAIA,CAAE,CAAA,EAAA,CACN,GAAKA,CAAAA,CAAAA,CAAE,cACP,CAAA,KAAA,CAAOA,EAAE,IACT,CAAA,QAAA,CAAUA,CAAE,CAAA,QACb,CACD","file":"index.global.js","sourcesContent":["import type { Action } from \"@rss3/api-core\";\n\nimport type { MetadataDoc } from \"./doc.js\";\n\ntype Handlers = {\n\t[K in keyof MetadataDoc]: (metadata: MetadataDoc[K][\"ref\"]) => void;\n};\n\nexport function getTagType(action: Action) {\n\treturn `${action.tag}-${action.type}` as keyof Handlers;\n}\n\nexport function handleMetadata(action: Action, handlers: Partial<Handlers>) {\n\t// biome-ignore lint/suspicious/noExplicitAny: Use of any is necessary here\n\thandlers[getTagType(action)]?.(action.metadata as any);\n}\n\nexport { renderItemActionToHTML } from \"./parser.js\";\n","import type {\n\tAction,\n\tCollectibleApproval,\n\tCollectibleTrade,\n\tCollectibleTransfer,\n} from \"@rss3/api-core\";\n\nimport { handleMetadata } from \"../../metadata/index.js\";\n\nexport type BriefAsset = {\n\tcontract?: string | null;\n\tid?: string | null;\n\turl?: string;\n\ttitle?: string;\n\tdescription?: string;\n};\n\nexport function extractAsset(action: Action) {\n\tlet res: BriefAsset | undefined;\n\n\thandleMetadata(action, {\n\t\t\"collectible-transfer\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-approval\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-mint\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-burn\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-trade\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t});\n\n\treturn res;\n}\n\nexport function extractNFT(\n\tm: CollectibleTransfer | CollectibleTrade | CollectibleApproval,\n) {\n\treturn {\n\t\taddress: m.address,\n\t\tid: m.id,\n\t\turl: m.parsedImageUrl,\n\t\ttitle: m.name,\n\t\tstandard: m.standard,\n\t};\n}\n"]}