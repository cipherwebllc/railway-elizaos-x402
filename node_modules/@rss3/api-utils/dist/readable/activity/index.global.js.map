{"version":3,"sources":["../../../src/metadata/index.ts","../../../src/readable/activity/theme.ts","../../../src/readable/number/index.ts","../../../src/readable/activity/token.ts","../../../src/readable/activity/index.ts"],"names":["getTagType","action","handleMetadata","handlers","themePlain","c","ellipsis","stripHTMLTags","content","max","result","s","formatTokenValue","amount_","decimals","money","amount","formatUnits","matched","bigNum","unit","token","type","meta","tokenSpace","tokenText","tokenSeparator","join","tokens","sep","acc","t","tokenName","tokenImage","tokenNetwork","tokenTime","tokenAddr","tokenHandle","addr","network","INFINITY_VALUE","tokenValue","tokenPlatform","platform","tokenPost","tokenAsset","name","img","getSummaryActions","actions","tag","formatPlain","activity","list","format","clean","i","theme","tokenizeActivity","tokenizeAction","tokenizeToActions","tokenizeToSummaryActions","direction","res","m","hasMultiPrimaryActions","count","flatActivity"],"mappings":"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","file":"index.global.js","sourcesContent":["import type { Action } from \"@rss3/api-core\";\n\nimport type { MetadataDoc } from \"./doc.js\";\n\ntype Handlers = {\n\t[K in keyof MetadataDoc]: (metadata: MetadataDoc[K][\"ref\"]) => void;\n};\n\nexport function getTagType(action: Action) {\n\treturn `${action.tag}-${action.type}` as keyof Handlers;\n}\n\nexport function handleMetadata(action: Action, handlers: Partial<Handlers>) {\n\t// biome-ignore lint/suspicious/noExplicitAny: Use of any is necessary here\n\thandlers[getTagType(action)]?.(action.metadata as any);\n}\n\nexport { renderItemActionToHTML } from \"./parser.js\";\n","import type { Token, TokenType } from \"./token.js\";\n\nexport type Theme<T> = {\n\t[key in TokenType]: (content: string, meta?: Token[\"meta\"]) => T;\n};\n\nexport const themePlain: Theme<string> = {\n\thtml: (c) => JSON.stringify(ellipsis(stripHTMLTags(c))),\n\tname: (c) => JSON.stringify(c),\n\tplatform: (c) => c,\n\taddress: (c) => c,\n\tnetwork: (c) => JSON.stringify(c),\n\tnumber: (c) => c,\n\timage: () => \"\",\n\tsymbolImage: () => \"\",\n\tassetImage: () => \"\",\n\tsymbol: (c) => c,\n\ttext: (c) => c,\n\ttime: (c) => `[${c}]`,\n\tseparator: (c) => c,\n\tunknown: (c) => c,\n};\n\nfunction ellipsis(content: string, max = 50): string {\n\tlet result = content;\n\n\tif (/\\n/.test(content)) {\n\t\tresult = result.replace(/\\n[\\s\\S]+/g, \" \").trim();\n\t}\n\n\treturn result.length > max ? `${result.slice(0, max)}...` : result;\n}\n\nfunction stripHTMLTags(s: string) {\n\treturn s.replace(/<[^>]*>?/gm, \"\");\n}\n","export function formatTokenValue(amount_?: string | null, decimals?: number) {\n\tlet result = \"0.00\";\n\tlet money: string;\n\tlet amount = amount_;\n\n\tif (amount) {\n\t\tif (Number.isNaN(Number(amount)) || Number(amount) === 0) {\n\t\t\treturn \"0.00\";\n\t\t}\n\n\t\tif (Number(amount) > 0 && decimals !== undefined) {\n\t\t\tamount = formatUnits(amount, decimals);\n\t\t}\n\n\t\tconst matched = amount.match(/^(0.0+)(.*)/);\n\t\tif (Number(amount) > 0 && Number(amount) < 1) {\n\t\t\tmoney = matched\n\t\t\t\t? // biome-ignore lint/style/noNonNullAssertion: Already checked the matched value is not null\n\t\t\t\t\tmatched[1] + matched[2]!.slice(0, 3)\n\t\t\t\t: `0.${amount.split(\"0.\")[1]?.slice(0, 3) ?? \"0\"}`;\n\t\t} else {\n\t\t\tmoney = Number(Number(amount).toFixed(3)).toString();\n\t\t}\n\n\t\tif (!money.includes(\".\")) {\n\t\t\tmoney = Number(amount).toFixed(2);\n\t\t}\n\n\t\tresult = money.replace(/(\\d)(?=(\\d{3})+\\.\\d+)/g, \"$1,\");\n\t}\n\n\treturn result;\n}\n\nexport function formatUnits(bigNum: string, unit: number) {\n\treturn (\n\t\tbigNum.length > unit\n\t\t\t? `${bigNum.slice(0, bigNum.length - unit)}.${bigNum.slice(-unit)}`\n\t\t\t: `0.${\"0\".repeat(unit - bigNum.length)}${bigNum}`\n\t).replace(/0+$/, \"\");\n}\n\nexport function formatThousands(num: number) {\n\tif (Number.isNaN(num)) return num.toString();\n\n\tconst withDecimal = Number(num > 1 ? num.toFixed(2) : num.toFixed(4))\n\t\t.toString()\n\t\t.split(\".\");\n\n\tif (withDecimal.length > 0) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: Already checked the length of withDecimal is greater than 0\n\t\twithDecimal[0] = withDecimal[0]!.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t}\n\n\treturn withDecimal.join(\".\");\n}\n\nexport function formatPrecision(num: number, n = 2) {\n\tconst scale = 10 ** n;\n\treturn Math.round(num * scale) / scale;\n}\n","import type { Action, Activity } from \"@rss3/api-core\";\n\nimport { formatTokenValue } from \"../number/index.js\";\n\nexport type TokenType =\n\t| \"text\" // plain text\n\t| \"html\" // html text\n\t| \"number\" // number value, such as token exchange rate\n\t| \"image\" // image url\n\t| \"symbolImage\" // symbol image url\n\t| \"assetImage\" // asset image url\n\t| \"symbol\" // short name for a token, such as BTC, ETH\n\t| \"address\" // wallet address or txn address, such as https://help.coinbase.com/en/coinbase/getting-started/crypto-education/what-is-a-transaction-hash-hash-id\n\t| \"name\" // name for NFT, etc\n\t| \"platform\" // platform name\n\t| \"network\" // network name\n\t| \"separator\" // separator for actions\n\t| \"time\" // time\n\t| \"unknown\"; // unknown data type to tokenize\n\nexport type Token = {\n\ttype: TokenType;\n\tcontent: string;\n\tmeta?: {\n\t\taddress?: string | null;\n\t\tnetwork?: string | null;\n\t\tid?: string | null;\n\t\tpreview?: string;\n\t};\n};\n\nexport function token(\n\ttype: Token[\"type\"],\n\tcontent = \"\",\n\tmeta?: Token[\"meta\"],\n): Token {\n\treturn { type, content, meta };\n}\n\nexport const tokenSpace = tokenText(\" \");\n\nexport const tokenSeparator = token(\"separator\", \"; \");\n\nexport function join(tokens: Token[], sep = tokenSpace): Token[] {\n\treturn tokens\n\t\t.reduce((acc, t) => {\n\t\t\tacc.push(sep, t);\n\t\t\treturn acc;\n\t\t}, [] as Token[])\n\t\t.slice(1);\n}\n\nexport function tokenText(t: string): Token {\n\treturn token(\"text\", t);\n}\n\nexport function tokenName(t: string): Token {\n\treturn token(\"name\", t);\n}\n\nexport function tokenImage(t: string | null | undefined) {\n\treturn token(\"image\", t || \"\");\n}\n\nexport function tokenNetwork(t: string | null | undefined) {\n\treturn token(\"network\", t || \"\");\n}\n\nexport function tokenTime(t: number) {\n\treturn token(\"time\", new Date(t * 1000).toJSON());\n}\n\nexport function tokenAddr(t: string | null | undefined) {\n\treturn token(\"address\", t || \"\");\n}\n\nexport function tokenHandle(\n\tt: string | null | undefined,\n\taddr: string | null | undefined,\n\tnetwork: string | null | undefined,\n) {\n\tif (!addr) return token(\"address\", t || \"\");\n\treturn token(\"address\", t || \"\", { address: addr, network: network || \"\" });\n}\n\nexport type TokenMetadata = {\n\tsymbol?: string;\n\tdecimals?: number;\n\timage?: string;\n\tvalue?: string | null;\n};\n\n// maximum value of uint256\nconst INFINITY_VALUE =\n\t\"115792089237316195423570985008687907853269984665640564039457584007913129639935\";\n\nexport function tokenValue(t: TokenMetadata | null | undefined) {\n\tif (!t) return [token(\"number\", \"0\")];\n\tif (t.value === INFINITY_VALUE)\n\t\treturn [token(\"number\", \"infinite\"), token(\"symbol\", t.symbol)];\n\treturn [\n\t\ttoken(\"symbolImage\", t.image),\n\t\ttoken(\"number\", formatTokenValue(t.value, t.decimals) || \"0\"),\n\t\ttoken(\"symbol\", t.symbol),\n\t];\n}\n\nexport function tokenPlatform(t: Activity | Action) {\n\tlet platform = \"\";\n\tif (t.platform) {\n\t\tplatform = t.platform;\n\t\treturn [tokenText(\"on\"), token(\"platform\", platform)];\n\t}\n\treturn [];\n}\n\nexport function tokenPost(t: Action) {\n\tif (t.tag !== \"social\") {\n\t\treturn tokenText(\"\");\n\t}\n\n\tif (t.metadata) {\n\t\tif (\n\t\t\t\"title\" in t.metadata &&\n\t\t\tt.metadata.title &&\n\t\t\t!(t.platform === \"Lens\" && t.metadata.title)\n\t\t) {\n\t\t\treturn token(\"html\", t.metadata.title);\n\t\t}\n\n\t\tif (\"body\" in t.metadata && t.metadata.body) {\n\t\t\treturn token(\"html\", t.metadata.body);\n\t\t}\n\n\t\tif (\n\t\t\t\"target\" in t.metadata &&\n\t\t\tt.metadata.target &&\n\t\t\t\"body\" in t.metadata.target &&\n\t\t\t// FIXME: remove ts-ignore after GI fixing the type\n\t\t\t// @ts-ignore target is not null\n\t\t\tt.metadata.target.body\n\t\t) {\n\t\t\t// @ts-ignore target is not null\n\t\t\treturn token(\"html\", t.metadata.target.body);\n\t\t}\n\t}\n\n\treturn token(\"html\", \"\");\n}\n\nexport function tokenAsset(name: string, meta?: Token[\"meta\"]) {\n\tconst img = meta?.preview;\n\tif (img) {\n\t\treturn [token(\"assetImage\", img), token(\"name\", name, meta)];\n\t}\n\treturn [token(\"name\", name, meta)];\n}\n","import type { Action, Activity } from \"@rss3/api-core\";\n\nimport { handleMetadata } from \"../../metadata/index.js\";\nimport { type Theme, themePlain } from \"./theme.js\";\nimport {\n\ttype Token,\n\tjoin,\n\ttoken,\n\ttokenAddr,\n\ttokenAsset,\n\ttokenHandle,\n\ttokenImage,\n\ttokenName,\n\ttokenNetwork,\n\ttokenPlatform,\n\ttokenPost,\n\ttokenSeparator,\n\ttokenSpace,\n\ttokenText,\n\ttokenTime,\n\ttokenValue,\n} from \"./token.js\";\n\nexport * from \"./theme.js\";\n\nexport function getSummaryActions({ actions, tag, type }: Activity): Action[] {\n\tif (!actions) return [];\n\tif (actions.length === 1) return actions;\n\n\tconst list = [\"transaction-multisig\"];\n\n\treturn list.includes(`${tag}-${type}`)\n\t\t? actions\n\t\t: actions.filter((t) => t.tag === tag && t.type === type);\n}\n\nexport function formatPlain(activity: Activity): string {\n\tconst list = format(activity, themePlain).filter((s) => s !== \"\");\n\n\tconst clean: string[] = [];\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (list[i] === \" \" && list[i + 1] === \" \") continue;\n\t\tclean.push(list[i] ?? \"\");\n\t}\n\n\treturn clean.join(\"\");\n}\n\n/**\n * Format an activity into a list of tokens that can be used to custom render the output of a activity, such as CLI output.\n */\nexport function format<T>(activity: Activity, theme: Theme<T>): T[] {\n\tconst ts = tokenizeActivity(activity);\n\treturn ts.map((t) => {\n\t\tif (!theme[t.type]) {\n\t\t\treturn theme.unknown(t.content);\n\t\t}\n\n\t\treturn theme[t.type](t.content);\n\t});\n}\n\n/**\n * Returns a list of tokens that can be used to custom render the output of a activity, such as CLI output\n * all the symbols in blue color.\n */\nexport function tokenizeActivity(activity: Activity): Token[] {\n\tconst actions = getSummaryActions(activity);\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn tokenizeAction(activity, actions[0]!);\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [token(\"unknown\", \"Carried out an activity\")];\n\t}\n\n\tconst tokens = actions.reduce((acc, action) => {\n\t\tif (acc.length > 0) {\n\t\t\tacc.push(tokenSeparator);\n\t\t}\n\n\t\tacc.push(...tokenizeAction(activity, action));\n\n\t\treturn acc;\n\t}, [] as Token[]);\n\n\t// biome-ignore lint/style/noNonNullAssertion: FIXME: Remove the non-null assertion once GI's OpenAPI spec is updated\n\ttokens.push(tokenSpace, tokenTime(activity.timestamp!));\n\n\treturn tokens;\n}\n\nexport function tokenizeToActions(activity: Activity): Token[][] {\n\tconst actions = activity.actions ?? [];\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn [tokenizeAction(activity, actions[0]!)];\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [[token(\"unknown\", \"Carried out an activity\")]];\n\t}\n\n\treturn actions.map((action) => tokenizeAction(activity, action));\n}\n\nexport function tokenizeToSummaryActions(activity: Activity): Token[][] {\n\tconst actions = getSummaryActions(activity);\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn [tokenizeAction(activity, actions[0]!)];\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [[token(\"unknown\", \"Carried out an activity\")]];\n\t}\n\n\treturn actions.map((action) => tokenizeAction(activity, action));\n}\n\n/**\n * Returns a list of tokens that can be used to custom render the output of an action, such as CLI output\n */\nexport function tokenizeAction(activity: Activity, action: Action): Token[] {\n\tconst direction = activity.direction;\n\tlet res = [tokenText(\"Carried out an activity\")];\n\thandleMetadata(action, {\n\t\t\"transaction-transfer\": (m) => {\n\t\t\tif (direction === \"in\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\ttokenText(\"received\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sent\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"transaction-approval\": (m) => {\n\t\t\tif (m.action === \"approve\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"revoked the approval of\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"transaction-mint\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\t...tokenValue(m),\n\t\t\t]);\n\t\t},\n\t\t\"transaction-burn\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\t...tokenValue(m),\n\t\t\t]);\n\t\t},\n\t\t\"transaction-bridge\": (m) => {\n\t\t\tlet network: Token[] = [];\n\t\t\tif (m.sourceNetwork) {\n\t\t\t\tnetwork = [\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenNetwork(m.sourceNetwork),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenNetwork(m.targetNetwork),\n\t\t\t\t];\n\t\t\t}\n\t\t\tif (m.action === \"deposit\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"deposited\"),\n\t\t\t\t\t...tokenValue(m.token),\n\t\t\t\t\t...network,\n\t\t\t\t\t...tokenPlatform(activity),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"withdrew\"),\n\t\t\t\t\t...tokenValue(m.token),\n\t\t\t\t\t...network,\n\t\t\t\t\t...tokenPlatform(activity),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t// for collectible or nft related action, it will use image_url as the image link\n\t\t\"collectible-transfer\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"transferred\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-approval\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tif (m.action === \"approve\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\t...tokenAsset(m.name || \"collection\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"revoked the approval of\"),\n\t\t\t\t\t...tokenAsset(m.name || \"collection\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"collectible-mint\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-burn\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-trade\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tif (m.action === \"buy\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\ttokenText(\"bought\"),\n\t\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sold\"),\n\t\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"exchange-swap\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"swapped\"),\n\t\t\t\t...tokenValue(m.from),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\t...tokenValue(m.to),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t// todo add the action invoker\n\t\t\"exchange-liquidity\": (m) => {\n\t\t\tconst tokens = m.tokens\n\t\t\t\t.flatMap((t) => join([...tokenValue(t), tokenText(\",\")]))\n\t\t\t\t.slice(0, -1);\n\t\t\tif (m.action === \"add\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"added\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"remove\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"removed\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"collect\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"collected\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"borrow\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"borrowed\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"repay\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"repaid\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"supply\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"supplied\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"withdraw\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"withDrew\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"social-post\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenHandle(m.handle || action.from, action.from, activity.network),\n\t\t\t\ttokenText(\"published a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-comment\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenHandle(m.handle || action.from, action.from, activity.network),\n\t\t\t\ttokenText(\"made a comment\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-share\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"shared a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-mint\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-revise\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\ttokenText(\"revised a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-profile\": (m) => {\n\t\t\tif (m.action === \"create\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"created a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"update\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"updated a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"renew\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"renewed a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"wrap\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"wrapped a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"unwrap\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"unwrapped a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"social-delete\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"deleted a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-proxy\": (m) => {\n\t\t\tif (m.action === \"appoint\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved a proxy\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"removed a proxy\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"metaverse-transfer\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"transferred\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-mint\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-burn\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-trade\": (m) => {\n\t\t\tif (m.action === \"buy\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"bought\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"sell\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sold\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"list\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"listed\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t});\n\treturn res;\n}\n\nexport function hasMultiPrimaryActions(activity: Activity): boolean {\n\tconst actions = getSummaryActions(activity);\n\tlet count = 0;\n\n\tfor (const action of actions) {\n\t\tif (action.type === activity.type && action.tag === activity.tag) {\n\t\t\tcount++;\n\n\t\t\tif (count > 1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\nexport function flatActivity(activity: Activity) {\n\tconst hasMulti = hasMultiPrimaryActions(activity);\n\n\tif (hasMulti) {\n\t\treturn getSummaryActions(activity).map(\n\t\t\t(action): Activity => ({\n\t\t\t\t...activity,\n\t\t\t\tactions: [action],\n\t\t\t}),\n\t\t);\n\t}\n\treturn [activity];\n}\n"]}