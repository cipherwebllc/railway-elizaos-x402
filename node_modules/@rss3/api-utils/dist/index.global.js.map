{"version":3,"sources":["../src/metadata/parser.ts","../src/metadata/index.ts","../src/readable/activity/theme.ts","../src/readable/number/index.ts","../src/readable/activity/token.ts","../src/readable/activity/index.ts","../src/name-service.ts","../src/readable/address/index.ts","../src/readable/asset/index.ts","../src/readable/content/index.ts","../src/is-spam-activity.ts","../src/const.ts","../src/get-icon-url.ts"],"names":["renderItemActionToHTML","actions","joint","i","action","tag","renderSocialTagContent","renderCollectibleTagContent","renderMetaverseTagContent","renderExchange","renderTransaction","type","metadata","extractMetadata","buildHTML","buildSectionFooterHTML","token","from","to","media","_tag","_type","data","arr","string","url","getTagType","handleMetadata","handlers","themePlain","c","ellipsis","stripHTMLTags","content","max","result","s","formatTokenValue","amount_","decimals","money","amount","formatUnits","matched","bigNum","unit","formatThousands","num","withDecimal","formatPrecision","n","scale","meta","tokenSpace","tokenText","tokenSeparator","join","tokens","sep","acc","t","tokenName","tokenImage","tokenNetwork","tokenTime","tokenAddr","tokenHandle","addr","network","INFINITY_VALUE","tokenValue","tokenPlatform","platform","tokenPost","tokenAsset","name","img","getSummaryActions","formatPlain","activity","list","format","clean","theme","tokenizeActivity","tokenizeAction","tokenizeToActions","tokenizeToSummaryActions","direction","res","m","hasMultiPrimaryActions","count","flatActivity","SUPPORTED_NAME_SERVICES","isSupportedNS","handle","_handle","ns","isAddress","address","isMastodon","formatAddress","formatAddressAndNS","value","addressToAvatarURL","size","extractAsset","extractNFT","formatContent","extractContent","extractSocialPost","formatTitle","title","body","_title","checkTargetExist","target","raw","isSpamActivity","EMPTY_ADDRESS","getIconURL"],"mappings":";;;MAkCO,SAASA,CAAuBC,CAAAA,CAAAA,CAAuC,CAC7E,IAAIC,EAAQ,EAERC,CAAAA,CAAAA,CAAI,CACR,CAAA,IAAA,IAAWC,CAAUH,IAAAA,CAAAA,CAAS,CAE7B,GAAI,CADaG,CAAO,CAAA,QAAA,CAEvB,SAED,GAAM,CAAE,GAAA,CAAAC,CAAI,CAAA,CAAID,EAChB,OAAQC,CAAAA,EACP,IAAK,QACJH,CAAAA,CAAAA,EAASI,CAAuBF,CAAAA,CAAM,EACtC,MACD,IAAK,aACJF,CAAAA,CAAAA,EAASK,CAA4BH,CAAAA,CAAM,CAC3C,CAAA,MACD,IAAK,WACJF,CAAAA,CAAAA,EAASM,CAA0BJ,CAAAA,CAAM,CACzC,CAAA,MACD,IAAK,UAAA,CACJF,GAASO,CAAeL,CAAAA,CAAM,CAC9B,CAAA,MACD,IAAK,aAAA,CACJF,CAASQ,EAAAA,CAAAA,CAAkBN,CAAM,CACjC,CAAA,KACF,CAEID,CAAAA,CAAIF,EAAQ,MAAS,CAAA,CAAA,GAAGC,CAAS,EAAA,QAAA,CAAA,CACrCC,IACD,CAEA,OAAOD,CACR,CAEA,IAAMQ,CAAAA,CAAqBN,CAAmB,EAAA,CAC7C,IAAIF,CAAQ,CAAA,EAAA,CACN,CAAE,IAAA,CAAAS,CAAK,CAAA,CAAIP,CACXC,CAAAA,CAAAA,CAAM,cACZ,OAAQM,CAAAA,EACP,IAAK,UACL,CAAA,IAAK,MACL,CAAA,IAAK,OACL,IAAK,UAAA,CAAY,CAChB,IAAMC,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,CAAMP,CAAAA,CAAM,EAClD,GAAI,CAACQ,CACJ,CAAA,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,CAAA,gBAAA,EACVH,EAAK,WAAY,EAAA,CAAE,EAAG,CAAA,CAAC,CAAIA,CAAAA,CAAAA,CAAK,KAAM,CAAA,CAAC,CACxC,CACW,KAAA,CAAA,CAAA,CAAA,0BAAA,EAA6BC,CAAS,CAAA,IAAI,CAC1C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,CAAS,CAAA,KAAK,OAC5C,CAAiCA,8BAAAA,EAAAA,CAAAA,CAAS,QAAQ,CAAA,IAAA,CAAA,CAClD,+BAA+BA,CAAS,CAAA,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,8BAAA,EAAiCA,EAAS,QAAQ,CAAA,IAAA,CAAA,CAClD,CAAgCA,6BAAAA,EAAAA,CAAAA,CAAS,OAAO,CAAA,IAAA,CAC5D,CAAC,CAAA,CACD,KACD,CACA,IAAK,OAAS,CAAA,CACb,IAAMA,CAAAA,CAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CACJ,CAAA,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,4BACA,CAAA,CAAA,gCAAA,EAAmCF,CAAS,CAAA,KAAA,CAAM,IAAI,CACtD,IAAA,CAAA,CAAA,CAAA,sCAAA,EAAyCA,CAAS,CAAA,WAAA,CAAY,IAAI,CAC9E,IAAA,CAAA,CAAC,CACD,CAAA,KACD,CACA,IAAK,QAAU,CAAA,CACd,IAAMA,CAAWC,CAAAA,CAAAA,CAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,EACJ,MAEDV,CAAAA,EAASY,CAAU,CAAA,CACP,6BACA,CAAA,CAAA,4BAAA,EAA+BF,CAAS,CAAA,MAAM,OAC9C,CAAuCA,oCAAAA,EAAAA,CAAAA,CAAS,aAAa,CAAA,IAAA,CAAA,CAC7D,uCAAuCA,CAAS,CAAA,aAAa,CACxEA,IAAAA,CAAAA,CAAAA,CAAAA,CAAS,OACG,CAAmCA,gCAAAA,EAAAA,CAAAA,CAAS,KAAM,CAAA,IAAI,CAClEA,IAAAA,CAAAA,CAAAA,CAAAA,CAAS,KACG,EAAA,CAAA,kCAAA,EAAqCA,EAAS,KAAM,CAAA,MAAM,CACtEA,IAAAA,CAAAA,CAAAA,CAAAA,CAAS,KACG,EAAA,CAAA,iCAAA,EAAoCA,CAAS,CAAA,KAAA,CAAM,KAAK,CACpEA,IAAAA,CAAAA,CAAAA,CAAAA,CAAS,KACG,EAAA,CAAA,mCAAA,EAAsCA,CAAS,CAAA,KAAA,CAAM,OAAO,CAAA,IAAA,CACzE,CAAC,CACD,CAAA,KACD,CACD,CAEA,OAAOG,CAAuBb,CAAAA,CAAAA,CAAOE,CAAM,CAC5C,EAEMK,CAAkBL,CAAAA,CAAAA,EAAmB,CAC1C,IAAIF,CAAQ,CAAA,EAAA,CACN,CAAE,IAAA,CAAAS,CAAK,CAAIP,CAAAA,CAAAA,CACXC,CAAM,CAAA,UAAA,CACZ,OAAQM,CAAAA,EACP,IAAK,YAAa,CACjB,IAAMC,CAAWC,CAAAA,CAAAA,CAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAAAA,EAASY,EAAU,CACP,6BAAA,CACA,CAA+BF,4BAAAA,EAAAA,CAAAA,CAAS,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAaGA,EAAAA,CAAAA,CAAS,MAAO,CAAA,GAAA,CACxBI,CAAqB,EAAA,CAAA;AAAA,sBAAA,EACPA,EAAM,OAAO,CAAA;AAAA,sBAAA,EACbA,EAAM,KAAK,CAAA;AAAA,sBAAA,EACXA,EAAM,IAAI,CAAA;AAAA,sBAAA,EACVA,EAAM,MAAM,CAAA;AAAA,sBAAA,EACZA,EAAM,QAAQ,CAAA;AAAA,sBAAA,EACdA,EAAM,QAAQ,CAAA;AAAA,qBAAA,CAE9B,CAAC,CAAA;AAAA;AAAA;AAAA,YAIN,CAAA,CAAC,CACD,CAAA,KACD,CACA,IAAK,SAAW,CAAA,CACf,IAAMJ,CAAAA,CAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,CAAMP,CAAAA,CAAM,CAClD,CAAA,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAAAA,EAASY,CAAU,CAAA,CACP,6BACA,CAAA,CAAA,4BAAA,EAA+BF,CAAS,CAAA,MAAM,CACzDA,IAAAA,CAAAA,CAAAA,CAAAA,CAAS,KACG,EAAA,CAAA;AAAA;AAAA;AAAA;AAAA,0CAI4BA,EAAAA,CAAAA,CAAS,MAAM,OAAO,CAAA;AAAA,wCACxBA,EAAAA,CAAAA,CAAS,MAAM,KAAK,CAAA;AAAA,uCACrBA,EAAAA,CAAAA,CAAS,MAAM,IAAI,CAAA;AAAA,yCACjBA,EAAAA,CAAAA,CAAS,MAAM,MAAM,CAAA;AAAA,2CACnBA,EAAAA,CAAAA,CAAS,MAAM,QAAQ,CAAA;AAAA,2CACvBA,EAAAA,CAAAA,CAAS,MAAM,QAAQ,CAAA;AAAA;AAAA,YAGjE,CAAA,CAAC,EACD,KACD,CACA,IAAK,MAAQ,CAAA,CACZ,IAAMA,CAAWC,CAAAA,CAAAA,CAAgBR,EAAKM,CAAMP,CAAAA,CAAM,EAClD,GAAI,CAACQ,EACJ,MAEDV,CAAAA,EAASY,EAAU,CACP,wBAAA,CACAF,EAAS,IACnB,EAAA,CAAA,0BAAA,EAA6BA,EAAS,IAAK,CAAA,OAAO,OACxCA,CAAS,CAAA,EAAA,EACnB,2BAA2BA,CAAS,CAAA,EAAA,EAAI,OAAO,CACjD,IAAA,CAAA,CAAC,EACF,CACD,CAEA,OAAOG,CAAuBb,CAAAA,CAAAA,CAAOE,CAAM,CAC5C,CAAA,CAEMI,EAA6BJ,CAAmB,EAAA,CACrD,IAAIF,CAAQ,CAAA,EAAA,CACN,CAAE,IAAAe,CAAAA,CAAAA,CAAM,GAAAC,CAAI,CAAA,IAAA,CAAAP,CAAK,CAAIP,CAAAA,CAAAA,CACrBC,EAAM,WACZ,CAAA,OAAQM,GACP,IAAK,OAAQ,CACZ,IAAMC,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,yBACA,CAAA,CAAA,0BAAA,EAA6BF,EAAS,IAAI,CAAA,IAAA,CAAA,CAC1C,gCAAgCA,CAAS,CAAA,OAAO,OAChD,CAA+BA,4BAAAA,EAAAA,CAAAA,CAAS,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,EAAS,KAAK,CAAA,IAAA,CAAA,CAC5C,MAAMK,CAAI,CAAA,KAAA,EAAQC,CAAE,CAChC,IAAA,CAAA,CAAC,EACD,KACD,CACA,IAAK,OAAS,CAAA,CACb,IAAMN,CAAWC,CAAAA,CAAAA,CAAgBR,EAAKM,CAAMP,CAAAA,CAAM,EAClD,GAAI,CAACQ,EACJ,MAEDV,CAAAA,EAASY,EAAU,CACP,0BAAA,CACA,6BAA6BF,CAAS,CAAA,IAAI,OAC1C,CAAgCA,6BAAAA,EAAAA,CAAAA,CAAS,OAAO,CAChD,IAAA,CAAA,CAAA,CAAA,4BAAA,EAA+BA,EAAS,MAAM,CAAA,IAAA,CAAA,CAC9C,8BAA8BA,CAAS,CAAA,KAAK,OAC5C,CAAMK,GAAAA,EAAAA,CAAI,QAAQC,CAAE,CAAA,IAAA,CAChC,CAAC,CACD,CAAA,KACD,CACA,IAAK,MAAA,CACJ,CACC,IAAMN,CAAAA,CAAWC,EAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAClD,CAAA,GAAI,CAACQ,CACJ,CAAA,MAEDV,GAASY,CAAU,CAAA,CACP,0BACA,CAA6BF,0BAAAA,EAAAA,CAAAA,CAAS,IAAI,CAC1C,IAAA,CAAA,CAAA,CAAA,6BAAA,EAAgCA,EAAS,OAAO,CAAA,IAAA,CAAA,CAChD,+BAA+BA,CAAS,CAAA,MAAM,OAC9C,CAA8BA,2BAAAA,EAAAA,CAAAA,CAAS,KAAK,CAC5C,IAAA,CAAA,CAAA,CAAA,GAAA,EAAMK,CAAI,CAAQC,KAAAA,EAAAA,CAAE,MAChC,CAAC,EACF,CACA,MACD,IAAK,WAAY,CAChB,IAAMN,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,6BACA,CAAA,CAAA,0BAAA,EAA6BF,EAAS,IAAI,CAAA,IAAA,CAAA,CAC1C,gCAAgCA,CAAS,CAAA,OAAO,OAChD,CAA+BA,4BAAAA,EAAAA,CAAAA,CAAS,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,EAAS,KAAK,CAAA,IAAA,CAAA,CAC5C,MAAMK,CAAI,CAAA,KAAA,EAAQC,CAAE,CAChC,IAAA,CAAA,CAAC,EACF,CACD,CAEA,OAAOH,CAAuBb,CAAAA,CAAAA,CAAOE,CAAM,CAC5C,CAAA,CACMG,EAA+BH,CAAmB,EAAA,CACvD,IAAIF,CAAQ,CAAA,EAAA,CACN,CAAE,IAAAe,CAAAA,CAAAA,CAAM,GAAAC,CAAI,CAAA,IAAA,CAAAP,CAAK,CAAIP,CAAAA,CAAAA,CACrBC,EAAM,aACZ,CAAA,OAAQM,GACP,IAAK,WAAY,CAChB,IAAMC,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,+BACA,CAAA,CAAA,0BAAA,EAA6BF,EAAS,IAAI,CAAA,IAAA,CAAA,CAC1C,gCAAgCA,CAAS,CAAA,OAAO,OAChD,CAA+BA,4BAAAA,EAAAA,CAAAA,CAAS,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,EAAS,KAAK,CAAA,IAAA,CAAA,CAC5C,MAAMK,CAAI,CAAA,KAAA,EAAQC,CAAE,CAChC,IAAA,CAAA,CAAC,EAED,KACD,CACA,IAAK,MAAQ,CAAA,CACZ,IAAMN,CAAWC,CAAAA,CAAAA,CAAgBR,EAAKM,CAAMP,CAAAA,CAAM,EAClD,GAAI,CAACQ,EACJ,MAEDV,CAAAA,EAASY,EAAU,CACP,2BAAA,CACA,6BAA6BF,CAAS,CAAA,IAAI,OAC1C,CAAgCA,6BAAAA,EAAAA,CAAAA,CAAS,OAAO,CAChD,IAAA,CAAA,CAAA,CAAA,4BAAA,EAA+BA,EAAS,MAAM,CAAA,IAAA,CAAA,CAC9C,8BAA8BA,CAAS,CAAA,KAAK,OAC5C,CAAMK,GAAAA,EAAAA,CAAI,QAAQC,CAAE,CAAA,IAAA,CAChC,CAAC,CACD,CAAA,KACD,CACA,IAAK,OAAA,CAAS,CACb,IAAMN,CAAAA,CAAWC,EAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAClD,CAAA,GAAI,CAACQ,CACJ,CAAA,MAEDV,GAASY,CAAU,CAAA,CACP,6BACA,CAA6BF,0BAAAA,EAAAA,CAAAA,CAAS,IAAI,CAC1C,IAAA,CAAA,CAAA,CAAA,6BAAA,EAAgCA,EAAS,OAAO,CAAA,IAAA,CAAA,CAChD,+BAA+BA,CAAS,CAAA,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,CAAS,CAAA,KAAK,OAC5C,CAAMK,GAAAA,EAAAA,CAAI,QAAQC,CAAE,CAAA,IAAA,CAChC,CAAC,CACD,CAAA,KACD,CACA,IAAK,MAAA,CACJ,CACC,IAAMN,CAAAA,CAAWC,EAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAClD,CAAA,GAAI,CAACQ,CACJ,CAAA,MAEDV,GAASY,CAAU,CAAA,CACP,4BACA,CAA6BF,0BAAAA,EAAAA,CAAAA,CAAS,IAAI,CAC1C,IAAA,CAAA,CAAA,CAAA,6BAAA,EAAgCA,EAAS,OAAO,CAAA,IAAA,CAAA,CAChD,+BAA+BA,CAAS,CAAA,MAAM,OAC9C,CAA8BA,2BAAAA,EAAAA,CAAAA,CAAS,KAAK,CAC5C,IAAA,CAAA,CAAA,CAAA,GAAA,EAAMK,CAAI,CAAQC,KAAAA,EAAAA,CAAE,MAChC,CAAC,EACF,CACA,MACD,IAAK,WAAY,CAChB,IAAMN,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,+BACA,CAAA,CAAA,0BAAA,EAA6BF,EAAS,IAAI,CAAA,IAAA,CAAA,CAC1C,gCAAgCA,CAAS,CAAA,OAAO,OAChD,CAA+BA,4BAAAA,EAAAA,CAAAA,CAAS,MAAM,CAC9C,IAAA,CAAA,CAAA,CAAA,2BAAA,EAA8BA,EAAS,KAAK,CAAA,IAAA,CAAA,CAC5C,MAAMK,CAAI,CAAA,KAAA,EAAQC,CAAE,CAChC,IAAA,CAAA,CAAC,EACF,CACD,CAEA,OAAOH,CAAuBb,CAAAA,CAAAA,CAAOE,CAAM,CAC5C,CAAA,CAEME,EAA0BF,CAAmB,EAAA,CAClD,IAAIF,CAAQ,CAAA,EAAA,CACN,CAAE,IAAAS,CAAAA,CAAK,EAAIP,CACXC,CAAAA,CAAAA,CAAM,SACZ,OAAQM,CAAAA,EACP,IAAK,SAAA,CACJ,MAED,IAAK,MAAA,CAAQ,CACZ,IAAMC,CAAAA,CAAWC,EAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAClD,CAAA,GAAI,CAACQ,CACJ,CAAA,MAEDV,GAASY,CAAU,CAAA,CACP,UAAUF,CAAS,CAAA,MAAM,6BACzBA,CAAS,CAAA,IACrB,CAAC,CACD,CAAA,KACD,CACA,IAAK,QAAA,CAAU,CACd,IAAMA,CAAAA,CAAWC,EAAgBR,CAAKM,CAAAA,CAAAA,CAAMP,CAAM,CAClD,CAAA,GAAI,CAACQ,CACJ,CAAA,MAEDV,GAASY,CAAU,CAAA,CACP,UAAUF,CAAS,CAAA,MAAM,8BACrC,CAAC,CAAA,CACD,KACD,CACA,IAAK,OAAQ,CACZ,IAAMA,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,EAAY,CAACA,CAAS,CAAA,IAAA,CAC1B,MAEDV,CAASU,EAAAA,CAAAA,CAAS,KAClB,KACD,CACA,IAAK,SAAW,CAAA,CACf,IAAMA,CAAWC,CAAAA,CAAAA,CAAgBR,EAAKM,CAAMP,CAAAA,CAAM,EAClD,GAAI,CAACQ,GAAY,CAACA,CAAAA,CAAS,OAC1B,MAEDV,CAAAA,EAASY,EAAU,CACP,CAAA,OAAA,EAAUF,EAAS,MAAM,CAAA,cAAA,EAAiBA,EAAS,MAAO,CAAA,MAAM,uBAChE,CAAeA,YAAAA,EAAAA,CAAAA,CAAS,OAAO,IAAI,CAAA,aAAA,CAAA,CACnC,OAAOA,CAAS,CAAA,IAAI,GACpBA,CAAS,CAAA,KAAA,EACjB,IACAO,CACA,EAAA,CAAA,UAAA,EAAaA,EAAM,OAAO,CAAA,wCAAA,CAC5B,EACC,IAAK,CAAA,EAAE,CACV,CAAC,CAAA,CAED,KACD,CACA,IAAK,SAAU,CACd,IAAMP,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,CAAUF,OAAAA,EAAAA,CAAAA,CAAS,MAAM,CACzBA,6BAAAA,CAAAA,CAAAA,CAAAA,CAAS,IACrB,CAAC,CAAA,CACD,KACD,CACA,IAAK,SAAU,CACd,IAAMA,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,CACJ,MAEDV,CAASY,EAAAA,CAAAA,CAAU,CACP,CAAUF,OAAAA,EAAAA,CAAAA,CAAS,MAAM,CACzBA,4BAAAA,CAAAA,CAAAA,CAAAA,CAAS,IACrB,CAAC,CAAA,CAED,KACD,CACA,IAAK,QACJ,MAED,IAAK,QAAS,CACb,IAAMA,EAAWC,CAAgBR,CAAAA,CAAAA,CAAKM,EAAMP,CAAM,CAAA,CAClD,GAAI,CAACQ,CAAAA,EAAY,CAACA,CAAS,CAAA,MAAA,CAC1B,MAGDV,CAASY,EAAAA,CAAAA,CAAU,CACP,CAAUF,OAAAA,EAAAA,CAAAA,CAAS,MAAM,CAA8BA,2BAAAA,EAAAA,CAAAA,CAAS,OAAO,SAAS,CAAA,kBAAA,EAAqBA,EAAS,MAAO,CAAA,MAAM,oBAC3HA,CAAS,CAAA,MAAA,EAAQ,KAC5BA,CAAS,CAAA,MAAA,CAAO,OACb,GACAO,CAAAA,CAAAA,EACA,aAAaA,CAAM,CAAA,OAAO,0CAC5B,CACC,CAAA,IAAA,CAAK,EAAE,CACV,CAAC,EACD,KACD,CACD,CAEA,OAAOjB,CACR,EAEA,SAASW,CAAAA,CACRO,EACAC,CACAC,CAAAA,CAAAA,CACqC,CAErC,OADiBA,CAAAA,CAAK,SAIfA,CAAK,CAAA,QAAA,CAFJ,IAGT,CAEA,SAASR,EAAUS,CAAsD,CAAA,CACxE,OAAOA,CAAI,CAAA,MAAA,CAAO,OAAO,CAAA,CAAE,IAAK,CAAA,CAAA;AAAA,CAAI,CACrC,CAEA,IAAMR,CAAyB,CAAA,CAACS,EAAgBpB,CAC/CU,GAAAA,CAAAA,CAAU,CACTU,CAAAA,CACA,CAAC,CAACpB,CAAAA,CAAO,UAAY,CAAiCA,8BAAAA,EAAAA,CAAAA,CAAO,QAAQ,CAE1D,IAAA,CAAA,CAAA,CAAA;AAAA,cAAA,EACGA,EAAO,WAClB,CAAA,GAAA,CAAKqB,GAAQ,CAAYA,SAAAA,EAAAA,CAAG,qBAAqBA,CAAG,CAAA,IAAA,CAAM,CAC1D,CAAA,IAAA,CAAK,WAAW,CAAC,CAAA,cAAA,CACrB,CAAC,CC9eK,CAAA,SAASC,EAAWtB,CAAgB,CAAA,CAC1C,OAAO,CAAA,EAAGA,EAAO,GAAG,CAAA,CAAA,EAAIA,EAAO,IAAI,CAAA,CACpC,CAEO,SAASuB,CAAAA,CAAevB,CAAgBwB,CAAAA,CAAAA,CAA6B,CAE3EA,CAASF,CAAAA,CAAAA,CAAWtB,CAAM,CAAC,CAAA,GAAIA,EAAO,QAAe,EACtD,CCTO,IAAMyB,EAA4B,CACxC,IAAA,CAAOC,GAAM,IAAK,CAAA,SAAA,CAAUC,EAASC,CAAcF,CAAAA,CAAC,CAAC,CAAC,EACtD,IAAOA,CAAAA,CAAAA,EAAM,KAAK,SAAUA,CAAAA,CAAC,EAC7B,QAAWA,CAAAA,CAAAA,EAAMA,CACjB,CAAA,OAAA,CAAUA,GAAMA,CAChB,CAAA,OAAA,CAAUA,GAAM,IAAK,CAAA,SAAA,CAAUA,CAAC,CAChC,CAAA,MAAA,CAASA,CAAMA,EAAAA,CAAAA,CACf,MAAO,IAAM,EAAA,CACb,YAAa,IAAM,EAAA,CACnB,WAAY,IAAM,EAAA,CAClB,MAASA,CAAAA,CAAAA,EAAMA,EACf,IAAOA,CAAAA,CAAAA,EAAMA,EACb,IAAOA,CAAAA,CAAAA,EAAM,IAAIA,CAAC,CAAA,CAAA,CAAA,CAClB,SAAYA,CAAAA,CAAAA,EAAMA,EAClB,OAAUA,CAAAA,CAAAA,EAAMA,CACjB,EAEA,SAASC,EAASE,CAAiBC,CAAAA,CAAAA,CAAM,EAAY,CAAA,CACpD,IAAIC,CAASF,CAAAA,CAAAA,CAEb,OAAI,IAAK,CAAA,IAAA,CAAKA,CAAO,CACpBE,GAAAA,CAAAA,CAASA,CAAO,CAAA,OAAA,CAAQ,aAAc,GAAG,CAAA,CAAE,MAGrCA,CAAAA,CAAAA,CAAAA,CAAO,OAASD,CAAM,CAAA,CAAA,EAAGC,CAAO,CAAA,KAAA,CAAM,EAAGD,CAAG,CAAC,MAAQC,CAC7D,CAEA,SAASH,CAAcI,CAAAA,CAAAA,CAAW,CACjC,OAAOA,EAAE,OAAQ,CAAA,YAAA,CAAc,EAAE,CAClC,CCnCO,SAASC,CAAiBC,CAAAA,CAAAA,CAAyBC,CAAmB,CAAA,CAC5E,IAAIJ,CAAS,CAAA,MAAA,CACTK,EACAC,CAASH,CAAAA,CAAAA,CAEb,GAAIG,CAAQ,CAAA,CACX,GAAI,MAAA,CAAO,MAAM,MAAOA,CAAAA,CAAM,CAAC,CAAK,EAAA,MAAA,CAAOA,CAAM,CAAM,GAAA,CAAA,CACtD,OAAO,MAAA,CAGJ,OAAOA,CAAM,CAAA,CAAI,GAAKF,CAAa,GAAA,KAAA,CAAA,GACtCE,EAASC,CAAYD,CAAAA,CAAAA,CAAQF,CAAQ,CAAA,CAAA,CAGtC,IAAMI,CAAUF,CAAAA,CAAAA,CAAO,MAAM,aAAa,CAAA,CACtC,OAAOA,CAAM,CAAA,CAAI,CAAK,EAAA,MAAA,CAAOA,CAAM,CAAI,CAAA,CAAA,CAC1CD,EAAQG,CAENA,CAAAA,CAAAA,CAAQ,CAAC,CAAIA,CAAAA,CAAAA,CAAQ,CAAC,CAAA,CAAG,MAAM,CAAG,CAAA,CAAC,EAClC,CAAKF,EAAAA,EAAAA,CAAAA,CAAO,MAAM,IAAI,CAAA,CAAE,CAAC,CAAA,EAAG,MAAM,CAAG,CAAA,CAAC,GAAK,GAAG,CAAA,CAAA,CAEjDD,EAAQ,MAAO,CAAA,MAAA,CAAOC,CAAM,CAAA,CAAE,QAAQ,CAAC,CAAC,EAAE,QAAS,EAAA,CAG/CD,EAAM,QAAS,CAAA,GAAG,CACtBA,GAAAA,CAAAA,CAAQ,OAAOC,CAAM,CAAA,CAAE,QAAQ,CAAC,CAAA,CAAA,CAGjCN,EAASK,CAAM,CAAA,OAAA,CAAQ,wBAA0B,CAAA,KAAK,EACvD,CAEA,OAAOL,CACR,CAEO,SAASO,EAAYE,CAAgBC,CAAAA,CAAAA,CAAc,CACzD,OAAA,CACCD,EAAO,MAASC,CAAAA,CAAAA,CACb,GAAGD,CAAO,CAAA,KAAA,CAAM,EAAGA,CAAO,CAAA,MAAA,CAASC,CAAI,CAAC,IAAID,CAAO,CAAA,KAAA,CAAM,CAACC,CAAI,CAAC,GAC/D,CAAK,EAAA,EAAA,GAAA,CAAI,MAAOA,CAAAA,CAAAA,CAAOD,EAAO,MAAM,CAAC,GAAGA,CAAM,CAAA,CAAA,EAChD,QAAQ,KAAO,CAAA,EAAE,CACpB,CAEO,SAASE,EAAgBC,CAAAA,CAAAA,CAAa,CAC5C,GAAI,MAAA,CAAO,MAAMA,CAAG,CAAA,CAAG,OAAOA,CAAAA,CAAI,UAElC,CAAA,IAAMC,EAAc,MAAOD,CAAAA,CAAAA,CAAM,EAAIA,CAAI,CAAA,OAAA,CAAQ,CAAC,CAAA,CAAIA,EAAI,OAAQ,CAAA,CAAC,CAAC,CAClE,CAAA,QAAA,GACA,KAAM,CAAA,GAAG,CAEX,CAAA,OAAIC,EAAY,MAAS,CAAA,CAAA,GAExBA,EAAY,CAAC,CAAA,CAAIA,EAAY,CAAC,CAAA,CAAG,QAAQ,uBAAyB,CAAA,GAAG,GAG/DA,CAAY,CAAA,IAAA,CAAK,GAAG,CAC5B,CAEO,SAASC,EAAgBF,CAAAA,CAAAA,CAAaG,CAAI,CAAA,CAAA,CAAG,CACnD,IAAMC,CAAAA,CAAQ,IAAMD,CACpB,CAAA,OAAO,KAAK,KAAMH,CAAAA,CAAAA,CAAMI,CAAK,CAAA,CAAIA,CAClC,CC7BO,SAASnC,EACfL,CACAsB,CAAAA,CAAAA,CAAU,GACVmB,CACQ,CAAA,CACR,OAAO,CAAE,KAAAzC,CAAM,CAAA,OAAA,CAAAsB,EAAS,IAAAmB,CAAAA,CAAK,CAC9B,CAEO,IAAMC,CAAaC,CAAAA,CAAAA,CAAU,GAAG,CAE1BC,CAAAA,CAAAA,CAAiBvC,EAAM,WAAa,CAAA,IAAI,EAE9C,SAASwC,CAAAA,CAAKC,CAAiBC,CAAAA,CAAAA,CAAML,EAAqB,CAChE,OAAOI,EACL,MAAO,CAAA,CAACE,EAAKC,CACbD,IAAAA,CAAAA,CAAI,IAAKD,CAAAA,CAAAA,CAAKE,CAAC,CACRD,CAAAA,CAAAA,CAAAA,CACL,EAAa,CAAA,CACf,MAAM,CAAC,CACV,CAEO,SAASL,EAAUM,CAAkB,CAAA,CAC3C,OAAO5C,CAAM,CAAA,MAAA,CAAQ4C,CAAC,CACvB,CAEO,SAASC,CAAAA,CAAUD,EAAkB,CAC3C,OAAO5C,EAAM,MAAQ4C,CAAAA,CAAC,CACvB,CAEO,SAASE,CAAWF,CAAAA,CAAAA,CAA8B,CACxD,OAAO5C,CAAAA,CAAM,QAAS4C,CAAK,EAAA,EAAE,CAC9B,CAEO,SAASG,CAAaH,CAAAA,CAAAA,CAA8B,CAC1D,OAAO5C,CAAAA,CAAM,UAAW4C,CAAK,EAAA,EAAE,CAChC,CAEO,SAASI,CAAUJ,CAAAA,CAAAA,CAAW,CACpC,OAAO5C,CAAAA,CAAM,OAAQ,IAAI,IAAA,CAAK4C,EAAI,GAAI,CAAA,CAAE,MAAO,EAAC,CACjD,CAEO,SAASK,EAAUL,CAA8B,CAAA,CACvD,OAAO5C,CAAM,CAAA,SAAA,CAAW4C,CAAK,EAAA,EAAE,CAChC,CAEO,SAASM,EACfN,CACAO,CAAAA,CAAAA,CACAC,EACC,CACD,OAAKD,CACEnD,CAAAA,CAAAA,CAAM,UAAW4C,CAAK,EAAA,EAAA,CAAI,CAAE,OAASO,CAAAA,CAAAA,CAAM,QAASC,CAAW,EAAA,EAAG,CAAC,CAAA,CADxDpD,EAAM,SAAW4C,CAAAA,CAAAA,EAAK,EAAE,CAE3C,CAUA,IAAMS,CACL,CAAA,gFAAA,CAEM,SAASC,CAAWV,CAAAA,CAAAA,CAAqC,CAC/D,OAAKA,CAAAA,CACDA,EAAE,KAAUS,GAAAA,CAAAA,CACR,CAACrD,CAAM,CAAA,QAAA,CAAU,UAAU,CAAA,CAAGA,EAAM,QAAU4C,CAAAA,CAAAA,CAAE,MAAM,CAAC,CAAA,CACxD,CACN5C,CAAM,CAAA,aAAA,CAAe4C,CAAE,CAAA,KAAK,EAC5B5C,CAAM,CAAA,QAAA,CAAUqB,EAAiBuB,CAAE,CAAA,KAAA,CAAOA,EAAE,QAAQ,CAAA,EAAK,GAAG,CAAA,CAC5D5C,EAAM,QAAU4C,CAAAA,CAAAA,CAAE,MAAM,CACzB,CAAA,CAPe,CAAC5C,CAAM,CAAA,QAAA,CAAU,GAAG,CAAC,CAQrC,CAEO,SAASuD,EAAcX,CAAsB,CAAA,CACnD,IAAIY,CAAW,CAAA,EAAA,CACf,OAAIZ,CAAAA,CAAE,UACLY,CAAWZ,CAAAA,CAAAA,CAAE,SACN,CAACN,CAAAA,CAAU,IAAI,CAAGtC,CAAAA,CAAAA,CAAM,UAAYwD,CAAAA,CAAQ,CAAC,CAE9C,EAAA,EACR,CAEO,SAASC,EAAUb,CAAW,CAAA,CACpC,GAAIA,CAAAA,CAAE,MAAQ,QACb,CAAA,OAAON,EAAU,EAAE,CAAA,CAGpB,GAAIM,CAAE,CAAA,QAAA,CAAU,CACf,GACC,UAAWA,CAAE,CAAA,QAAA,EACbA,EAAE,QAAS,CAAA,KAAA,EACX,EAAEA,CAAE,CAAA,QAAA,GAAa,MAAUA,EAAAA,CAAAA,CAAE,SAAS,KAEtC,CAAA,CAAA,OAAO5C,EAAM,MAAQ4C,CAAAA,CAAAA,CAAE,SAAS,KAAK,CAAA,CAGtC,GAAI,MAAA,GAAUA,EAAE,QAAYA,EAAAA,CAAAA,CAAE,SAAS,IACtC,CAAA,OAAO5C,EAAM,MAAQ4C,CAAAA,CAAAA,CAAE,QAAS,CAAA,IAAI,EAGrC,GACC,QAAA,GAAYA,EAAE,QACdA,EAAAA,CAAAA,CAAE,SAAS,MACX,EAAA,MAAA,GAAUA,CAAE,CAAA,QAAA,CAAS,QAGrBA,CAAE,CAAA,QAAA,CAAS,OAAO,IAGlB,CAAA,OAAO5C,EAAM,MAAQ4C,CAAAA,CAAAA,CAAE,QAAS,CAAA,MAAA,CAAO,IAAI,CAE7C,CAEA,OAAO5C,CAAM,CAAA,MAAA,CAAQ,EAAE,CACxB,CAEO,SAAS0D,CAAAA,CAAWC,EAAcvB,CAAsB,CAAA,CAC9D,IAAMwB,CAAMxB,CAAAA,CAAAA,EAAM,QAClB,OAAIwB,CAAAA,CACI,CAAC5D,CAAAA,CAAM,aAAc4D,CAAG,CAAA,CAAG5D,EAAM,MAAQ2D,CAAAA,CAAAA,CAAMvB,CAAI,CAAC,CAAA,CAErD,CAACpC,CAAM,CAAA,MAAA,CAAQ2D,EAAMvB,CAAI,CAAC,CAClC,CCnIO,SAASyB,EAAkB,CAAE,OAAA,CAAA5E,CAAS,CAAA,GAAA,CAAAI,EAAK,IAAAM,CAAAA,CAAK,EAAuB,CAC7E,OAAKV,EACDA,CAAQ,CAAA,MAAA,GAAW,CAEV,EAAA,CAAC,sBAAsB,CAExB,CAAA,QAAA,CAAS,GAAGI,CAAG,CAAA,CAAA,EAAIM,CAAI,CAAE,CAAA,CAAA,CAJJV,CAM9BA,CAAAA,CAAAA,CAAQ,OAAQ,CAAM,EAAA,CAAA,CAAE,MAAQI,CAAO,EAAA,CAAA,CAAE,OAASM,CAAI,CAAA,CAPpC,EAQtB,CAEO,SAASmE,EAAAA,CAAYC,EAA4B,CACvD,IAAMC,EAAOC,CAAOF,CAAAA,CAAAA,CAAUlD,CAAU,CAAA,CAAE,OAAQO,CAAMA,EAAAA,CAAAA,GAAM,EAAE,CAE1D8C,CAAAA,CAAAA,CAAkB,EACxB,CAAA,IAAA,IAAS/E,CAAI,CAAA,CAAA,CAAGA,EAAI6E,CAAK,CAAA,MAAA,CAAQ7E,IAC5B6E,CAAK7E,CAAAA,CAAC,IAAM,GAAO6E,EAAAA,CAAAA,CAAK7E,CAAI,CAAA,CAAC,IAAM,GACvC+E,EAAAA,CAAAA,CAAM,KAAKF,CAAK7E,CAAAA,CAAC,GAAK,EAAE,CAAA,CAGzB,OAAO+E,CAAAA,CAAM,KAAK,EAAE,CACrB,CAKO,SAASD,CAAAA,CAAUF,EAAoBI,CAAsB,CAAA,CAEnE,OADWC,CAAAA,CAAiBL,CAAQ,CAC1B,CAAA,GAAA,CAAKnB,GACTuB,CAAMvB,CAAAA,CAAAA,CAAE,IAAI,CAIVuB,CAAAA,CAAAA,CAAMvB,CAAE,CAAA,IAAI,EAAEA,CAAE,CAAA,OAAO,EAHtBuB,CAAM,CAAA,OAAA,CAAQvB,EAAE,OAAO,CAI/B,CACF,CAMO,SAASwB,CAAiBL,CAAAA,CAAAA,CAA6B,CAC7D,IAAM9E,CAAAA,CAAU4E,EAAkBE,CAAQ,CAAA,CAG1C,GAAIA,CAAAA,CAAS,MAAQ,QAAY9E,EAAAA,CAAAA,CAAQ,OAAS,CAEjD,CAAA,OAAOoF,EAAeN,CAAU9E,CAAAA,CAAAA,CAAQ,CAAC,CAAE,EAI5C,GAAI8E,CAAAA,CAAS,MAAQ,SAAaA,EAAAA,CAAAA,CAAS,OAAS,SACnD,CAAA,OAAO,CAAC/D,CAAAA,CAAM,UAAW,yBAAyB,CAAC,EAGpD,IAAMyC,CAAAA,CAASxD,EAAQ,MAAO,CAAA,CAAC0D,CAAKvD,CAAAA,CAAAA,IAC/BuD,EAAI,MAAS,CAAA,CAAA,EAChBA,EAAI,IAAKJ,CAAAA,CAAc,EAGxBI,CAAI,CAAA,IAAA,CAAK,GAAG0B,CAAeN,CAAAA,CAAAA,CAAU3E,CAAM,CAAC,CAAA,CAErCuD,GACL,EAAa,EAGhB,OAAAF,CAAAA,CAAO,IAAKJ,CAAAA,CAAAA,CAAYW,EAAUe,CAAS,CAAA,SAAU,CAAC,CAE/CtB,CAAAA,CACR,CAEO,SAAS6B,EAAAA,CAAkBP,CAA+B,CAAA,CAChE,IAAM9E,CAAU8E,CAAAA,CAAAA,CAAS,SAAW,EAAC,CAGrC,OAAIA,CAAS,CAAA,GAAA,GAAQ,QAAY9E,EAAAA,CAAAA,CAAQ,OAAS,CAE1C,CAAA,CAACoF,EAAeN,CAAU9E,CAAAA,CAAAA,CAAQ,CAAC,CAAE,CAAC,CAI1C8E,CAAAA,CAAAA,CAAS,MAAQ,SAAaA,EAAAA,CAAAA,CAAS,OAAS,SAC5C,CAAA,CAAC,CAAC/D,CAAM,CAAA,SAAA,CAAW,yBAAyB,CAAC,CAAC,CAG/Cf,CAAAA,CAAAA,CAAQ,IAAKG,CAAWiF,EAAAA,CAAAA,CAAeN,EAAU3E,CAAM,CAAC,CAChE,CAEO,SAASmF,EAAyBR,CAAAA,CAAAA,CAA+B,CACvE,IAAM9E,CAAAA,CAAU4E,EAAkBE,CAAQ,CAAA,CAG1C,OAAIA,CAAAA,CAAS,MAAQ,QAAY9E,EAAAA,CAAAA,CAAQ,OAAS,CAE1C,CAAA,CAACoF,EAAeN,CAAU9E,CAAAA,CAAAA,CAAQ,CAAC,CAAE,CAAC,CAI1C8E,CAAAA,CAAAA,CAAS,MAAQ,SAAaA,EAAAA,CAAAA,CAAS,OAAS,SAC5C,CAAA,CAAC,CAAC/D,CAAAA,CAAM,UAAW,yBAAyB,CAAC,CAAC,CAG/Cf,CAAAA,CAAAA,CAAQ,IAAKG,CAAWiF,EAAAA,CAAAA,CAAeN,CAAU3E,CAAAA,CAAM,CAAC,CAChE,CAKO,SAASiF,CAAeN,CAAAA,CAAAA,CAAoB3E,EAAyB,CAC3E,IAAMoF,CAAYT,CAAAA,CAAAA,CAAS,UACvBU,CAAM,CAAA,CAACnC,EAAU,yBAAyB,CAAC,EAC/C,OAAA3B,CAAAA,CAAevB,CAAQ,CAAA,CACtB,uBAAyBsF,CAAM,EAAA,CAC1BF,IAAc,IACjBC,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,CAAO,CAAA,EAAE,EACnBkD,CAAU,CAAA,UAAU,EACpB,GAAGgB,CAAAA,CAAWoB,CAAC,CACfpC,CAAAA,CAAAA,CAAU,MAAM,CAAA,CAChBW,EAAU7D,CAAO,CAAA,IAAI,CACtB,CAAC,CAAA,CAEDqF,EAAMjC,CAAK,CAAA,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,MAAM,CAChB,CAAA,GAAGgB,EAAWoB,CAAC,CAAA,CACfpC,EAAU,IAAI,CAAA,CACdW,EAAU7D,CAAO,CAAA,EAAE,CACpB,CAAC,EAEH,EACA,sBAAyBsF,CAAAA,CAAAA,EAAM,CAC1BA,CAAAA,CAAE,SAAW,SAChBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,CAAU,CAAA,UAAU,EACpB,GAAGgB,CAAAA,CAAWoB,CAAC,CACfpC,CAAAA,CAAAA,CAAU,IAAI,CACdW,CAAAA,CAAAA,CAAU7D,CAAO,CAAA,EAAE,CACpB,CAAC,CAAA,CAEDqF,EAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,yBAAyB,CACnC,CAAA,GAAGgB,EAAWoB,CAAC,CAAA,CACfpC,EAAU,IAAI,CAAA,CACdW,CAAU7D,CAAAA,CAAAA,CAAO,EAAE,CACpB,CAAC,EAEH,CACA,CAAA,kBAAA,CAAqBsF,GAAM,CAC1BD,CAAAA,CAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,QAAQ,EAClB,GAAGgB,CAAAA,CAAWoB,CAAC,CAChB,CAAC,EACF,CAAA,CACA,mBAAqBA,CAAM,EAAA,CAC1BD,EAAMjC,CAAK,CAAA,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,QAAQ,CAClB,CAAA,GAAGgB,EAAWoB,CAAC,CAChB,CAAC,EACF,EACA,oBAAuBA,CAAAA,CAAAA,EAAM,CAC5B,IAAItB,CAAAA,CAAmB,EACnBsB,CAAAA,CAAAA,CAAE,aACLtB,GAAAA,CAAAA,CAAU,CACTd,CAAU,CAAA,MAAM,EAChBS,CAAa2B,CAAAA,CAAAA,CAAE,aAAa,CAC5BpC,CAAAA,CAAAA,CAAU,IAAI,CAAA,CACdS,EAAa2B,CAAE,CAAA,aAAa,CAC7B,CAEGA,CAAAA,CAAAA,CAAAA,CAAE,SAAW,SAChBD,CAAAA,CAAAA,CAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,WAAW,EACrB,GAAGgB,CAAAA,CAAWoB,CAAE,CAAA,KAAK,EACrB,GAAGtB,CAAAA,CACH,GAAGG,CAAcQ,CAAAA,CAAQ,CAC1B,CAAC,CAAA,CAEDU,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,UAAU,CACpB,CAAA,GAAGgB,CAAWoB,CAAAA,CAAAA,CAAE,KAAK,CACrB,CAAA,GAAGtB,EACH,GAAGG,CAAAA,CAAcQ,CAAQ,CAC1B,CAAC,EAEH,CAEA,CAAA,sBAAA,CAAyBW,GAAM,CAC9B,IAAMtC,EAAO,CACZ,OAAA,CAASsC,EAAE,OACX,CAAA,EAAA,CAAIA,CAAE,CAAA,EAAA,CACN,QAASX,CAAS,CAAA,OAAA,CAClB,QAASW,CAAE,CAAA,cACZ,EACAD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,aAAa,CAAA,CACvB,GAAGoB,CAAWgB,CAAAA,CAAAA,CAAE,IAAQ,EAAA,UAAA,CAAYtC,CAAI,CACxCE,CAAAA,CAAAA,CAAU,IAAI,CACdW,CAAAA,CAAAA,CAAU7D,EAAO,EAAE,CACpB,CAAC,EACF,EACA,sBAAyBsF,CAAAA,CAAAA,EAAM,CAC9B,IAAMtC,CAAAA,CAAO,CACZ,OAASsC,CAAAA,CAAAA,CAAE,OACX,CAAA,EAAA,CAAIA,EAAE,EACN,CAAA,OAAA,CAASX,EAAS,OAClB,CAAA,OAAA,CAASW,EAAE,cACZ,CAAA,CACIA,CAAE,CAAA,MAAA,GAAW,UAChBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,UAAU,CAAA,CACpBQ,EAAW4B,CAAE,CAAA,cAAc,EAC3B,GAAGhB,CAAAA,CAAWgB,EAAE,IAAQ,EAAA,YAAA,CAActC,CAAI,CAAA,CAC1CE,EAAU,IAAI,CAAA,CACdW,EAAU7D,CAAO,CAAA,EAAE,CACpB,CAAC,CAAA,CAEDqF,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,yBAAyB,CACnC,CAAA,GAAGoB,CAAWgB,CAAAA,CAAAA,CAAE,MAAQ,YAActC,CAAAA,CAAI,EAC1CE,CAAU,CAAA,IAAI,EACdW,CAAU7D,CAAAA,CAAAA,CAAO,EAAE,CACpB,CAAC,EAEH,CAAA,CACA,mBAAqBsF,CAAM,EAAA,CAC1B,IAAMtC,CAAO,CAAA,CACZ,OAASsC,CAAAA,CAAAA,CAAE,QACX,EAAIA,CAAAA,CAAAA,CAAE,GACN,OAASX,CAAAA,CAAAA,CAAS,QAClB,OAASW,CAAAA,CAAAA,CAAE,cACZ,CAAA,CACAD,EAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,QAAQ,CAClB,CAAA,GAAGoB,EAAWgB,CAAE,CAAA,IAAA,EAAQ,WAAYtC,CAAI,CAAA,CACxCE,EAAU,IAAI,CAAA,CACdW,CAAU7D,CAAAA,CAAAA,CAAO,EAAE,CACpB,CAAC,EACF,CACA,CAAA,kBAAA,CAAqBsF,GAAM,CAC1B,IAAMtC,EAAO,CACZ,OAAA,CAASsC,EAAE,OACX,CAAA,EAAA,CAAIA,EAAE,EACN,CAAA,OAAA,CAASX,EAAS,OAClB,CAAA,OAAA,CAASW,CAAE,CAAA,cACZ,EACAD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,QAAQ,CAAA,CAClB,GAAGoB,CAAWgB,CAAAA,CAAAA,CAAE,MAAQ,UAAYtC,CAAAA,CAAI,CACzC,CAAC,EACF,CACA,CAAA,mBAAA,CAAsBsC,GAAM,CAC3B,IAAMtC,EAAO,CACZ,OAAA,CAASsC,EAAE,OACX,CAAA,EAAA,CAAIA,CAAE,CAAA,EAAA,CACN,QAASX,CAAS,CAAA,OAAA,CAClB,QAASW,CAAE,CAAA,cACZ,EACIA,CAAE,CAAA,MAAA,GAAW,KAChBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,EAAE,CAAA,CACnBkD,EAAU,QAAQ,CAAA,CAClB,GAAGoB,CAAAA,CAAWgB,EAAE,IAAQ,EAAA,UAAA,CAAYtC,CAAI,CACxCE,CAAAA,CAAAA,CAAU,MAAM,CAChBW,CAAAA,CAAAA,CAAU7D,CAAO,CAAA,IAAI,EACrB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EAEDqF,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,MAAM,CAAA,CAChB,GAAGoB,CAAWgB,CAAAA,CAAAA,CAAE,IAAQ,EAAA,UAAA,CAAYtC,CAAI,CACxCE,CAAAA,CAAAA,CAAU,IAAI,CACdW,CAAAA,CAAAA,CAAU7D,EAAO,EAAE,CAAA,CACnB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EAEH,CACA,CAAA,eAAA,CAAkBsF,GAAM,CACvBD,CAAAA,CAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,SAAS,EACnB,GAAGgB,CAAAA,CAAWoB,CAAE,CAAA,IAAI,EACpBpC,CAAU,CAAA,IAAI,EACd,GAAGgB,CAAAA,CAAWoB,EAAE,EAAE,CAAA,CAClB,GAAGnB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACF,CAEA,CAAA,oBAAA,CAAuBsF,GAAM,CAC5B,IAAMjC,CAASiC,CAAAA,CAAAA,CAAE,OACf,OAAS9B,CAAAA,CAAAA,EAAMJ,EAAK,CAAC,GAAGc,EAAWV,CAAC,CAAA,CAAGN,CAAU,CAAA,GAAG,CAAC,CAAC,CAAC,EACvD,KAAM,CAAA,CAAA,CAAG,EAAE,CACToC,CAAAA,CAAAA,CAAE,MAAW,GAAA,KAAA,CAChBD,EAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,OAAO,CACjB,CAAA,GAAGG,EACHH,CAAU,CAAA,cAAc,EACxB,GAAGiB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,SAAW,QACvBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,CAAU,CAAA,SAAS,EACnB,GAAGG,CAAAA,CACHH,EAAU,gBAAgB,CAAA,CAC1B,GAAGiB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EACSsF,CAAE,CAAA,MAAA,GAAW,UACvBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CAAA,CACrBkD,EAAU,WAAW,CAAA,CACrB,GAAGG,CACHH,CAAAA,CAAAA,CAAU,gBAAgB,CAC1B,CAAA,GAAGiB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,CAAA,CACSsF,EAAE,MAAW,GAAA,QAAA,CACvBD,EAAMjC,CAAK,CAAA,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,UAAU,CACpB,CAAA,GAAGG,EACHH,CAAU,CAAA,gBAAgB,CAC1B,CAAA,GAAGiB,EAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,SAAW,OACvBD,CAAAA,CAAAA,CAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,QAAQ,EAClB,GAAGG,CAAAA,CACHH,CAAU,CAAA,cAAc,EACxB,GAAGiB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACSsF,CAAE,CAAA,MAAA,GAAW,QACvBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,UAAU,CAAA,CACpB,GAAGG,CAAAA,CACHH,EAAU,cAAc,CAAA,CACxB,GAAGiB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,CAAA,CACSsF,CAAE,CAAA,MAAA,GAAW,aACvBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,UAAU,CAAA,CACpB,GAAGG,CACHH,CAAAA,CAAAA,CAAU,gBAAgB,CAC1B,CAAA,GAAGiB,EAAcnE,CAAM,CACxB,CAAC,CAAA,EAEH,EACA,aAAgBsF,CAAAA,CAAAA,EAAM,CACrBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVU,CAAYwB,CAAAA,CAAAA,CAAE,QAAUtF,CAAO,CAAA,IAAA,CAAMA,EAAO,IAAM2E,CAAAA,CAAAA,CAAS,OAAO,CAClEzB,CAAAA,CAAAA,CAAU,kBAAkB,CAC5BmB,CAAAA,CAAAA,CAAUrE,CAAM,CAAA,CAChB,GAAGmE,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EACF,EACA,gBAAmBsF,CAAAA,CAAAA,EAAM,CACxBD,CAAAA,CAAMjC,EAAK,CACVU,CAAAA,CAAYwB,EAAE,MAAUtF,EAAAA,CAAAA,CAAO,KAAMA,CAAO,CAAA,IAAA,CAAM2E,CAAS,CAAA,OAAO,EAClEzB,CAAU,CAAA,gBAAgB,EAC1BmB,CAAUrE,CAAAA,CAAM,EAChB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACF,CAAA,CACA,eAAgB,IAAM,CACrBqF,EAAMjC,CAAK,CAAA,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,eAAe,CACzBmB,CAAAA,CAAAA,CAAUrE,CAAM,CAChB,CAAA,GAAGmE,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EACF,EACA,aAAe,CAAA,IAAM,CACpBqF,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,eAAe,CAAA,CACzBmB,EAAUrE,CAAM,CAAA,CAChB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACF,CACA,CAAA,eAAA,CAAkBsF,GAAM,CACvBD,CAAAA,CAAMjC,CAAK,CAAA,CACVS,EAAUyB,CAAE,CAAA,MAAA,EAAUtF,EAAO,IAAI,CAAA,CACjCkD,EAAU,gBAAgB,CAAA,CAC1BmB,CAAUrE,CAAAA,CAAM,EAChB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACF,CACA,CAAA,gBAAA,CAAmBsF,CAAM,EAAA,CACpBA,EAAE,MAAW,GAAA,QAAA,CAChBD,EAAMjC,CAAK,CAAA,CACVS,EAAUyB,CAAE,CAAA,MAAA,EAAUtF,CAAO,CAAA,IAAI,EACjCkD,CAAU,CAAA,mBAAmB,EAC7BQ,CAAW4B,CAAAA,CAAAA,CAAE,QAAQ,CACrB7B,CAAAA,CAAAA,CAAU6B,CAAE,CAAA,IAAA,EAAQA,EAAE,MAAU,EAAA,EAAE,EAClC,GAAGnB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,SAAW,QACvBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAUyB,EAAE,MAAUtF,EAAAA,CAAAA,CAAO,IAAI,CAAA,CACjCkD,EAAU,mBAAmB,CAAA,CAC7BQ,EAAW4B,CAAE,CAAA,QAAQ,EACrB7B,CAAU6B,CAAAA,CAAAA,CAAE,MAAQA,CAAE,CAAA,MAAA,EAAU,EAAE,CAClC,CAAA,GAAGnB,EAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,MAAW,GAAA,OAAA,CACvBD,EAAMjC,CAAK,CAAA,CACVS,EAAUyB,CAAE,CAAA,MAAA,EAAUtF,EAAO,IAAI,CAAA,CACjCkD,CAAU,CAAA,mBAAmB,EAC7BQ,CAAW4B,CAAAA,CAAAA,CAAE,QAAQ,CACrB7B,CAAAA,CAAAA,CAAU6B,EAAE,IAAQA,EAAAA,CAAAA,CAAE,MAAU,EAAA,EAAE,EAClC,GAAGnB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACSsF,CAAE,CAAA,MAAA,GAAW,MACvBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAUyB,EAAE,MAAUtF,EAAAA,CAAAA,CAAO,IAAI,CACjCkD,CAAAA,CAAAA,CAAU,mBAAmB,CAAA,CAC7BQ,EAAW4B,CAAE,CAAA,QAAQ,EACrB7B,CAAU6B,CAAAA,CAAAA,CAAE,MAAQA,CAAE,CAAA,MAAA,EAAU,EAAE,CAAA,CAClC,GAAGnB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,CAAA,CACSsF,EAAE,MAAW,GAAA,QAAA,GACvBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAUyB,CAAAA,CAAAA,CAAE,QAAUtF,CAAO,CAAA,IAAI,EACjCkD,CAAU,CAAA,qBAAqB,CAC/BQ,CAAAA,CAAAA,CAAW4B,EAAE,QAAQ,CAAA,CACrB7B,EAAU6B,CAAE,CAAA,IAAA,EAAQA,EAAE,MAAU,EAAA,EAAE,CAClC,CAAA,GAAGnB,EAAcnE,CAAM,CACxB,CAAC,CAEH,EAAA,CAAA,CACA,gBAAiB,IAAM,CACtBqF,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,gBAAgB,CAC1BmB,CAAAA,CAAAA,CAAUrE,CAAM,CAAA,CAChB,GAAGmE,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EACF,EACA,cAAiBsF,CAAAA,CAAAA,EAAM,CAClBA,CAAAA,CAAE,SAAW,SAChBD,CAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,CAAU,CAAA,kBAAkB,EAC5B,GAAGiB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EAEDqF,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,iBAAiB,CAAA,CAC3B,GAAGiB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EAEH,CACA,CAAA,oBAAA,CAAuBsF,GAAM,CAC5BD,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,aAAa,CAAA,CACvBQ,EAAW4B,CAAE,CAAA,cAAc,EAC3B7B,CAAU6B,CAAAA,CAAAA,CAAE,IAAQ,EAAA,UAAU,EAC9BpC,CAAU,CAAA,IAAI,EACdW,CAAU7D,CAAAA,CAAAA,CAAO,EAAE,CACpB,CAAC,EACF,CAAA,CACA,iBAAmBsF,CAAM,EAAA,CACxBD,EAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,QAAQ,CAClBQ,CAAAA,CAAAA,CAAW4B,EAAE,cAAc,CAAA,CAC3B7B,EAAU6B,CAAE,CAAA,IAAA,EAAQ,UAAU,CAAA,CAC9B,GAAGnB,CAAcnE,CAAAA,CAAM,CACxB,CAAC,EACF,EACA,gBAAmBsF,CAAAA,CAAAA,EAAM,CACxBD,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,EAAU,QAAQ,CAAA,CAClBQ,CAAW4B,CAAAA,CAAAA,CAAE,cAAc,CAC3B7B,CAAAA,CAAAA,CAAU6B,EAAE,IAAQ,EAAA,UAAU,EAC9B,GAAGnB,CAAAA,CAAcnE,CAAM,CACxB,CAAC,EACF,CAAA,CACA,kBAAoBsF,CAAM,EAAA,CACrBA,EAAE,MAAW,GAAA,KAAA,CAChBD,CAAMjC,CAAAA,CAAAA,CAAK,CACVS,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrBkD,CAAAA,CAAAA,CAAU,QAAQ,CAClBQ,CAAAA,CAAAA,CAAW4B,CAAE,CAAA,cAAc,EAC3B7B,CAAU6B,CAAAA,CAAAA,CAAE,MAAQ,UAAU,CAAA,CAC9BpC,EAAU,MAAM,CAAA,CAChBW,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrB,CAAA,GAAGmE,EAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,MAAW,GAAA,MAAA,CACvBD,EAAMjC,CAAK,CAAA,CACVS,EAAU7D,CAAO,CAAA,IAAI,EACrBkD,CAAU,CAAA,MAAM,CAChBQ,CAAAA,CAAAA,CAAW4B,EAAE,cAAc,CAAA,CAC3B7B,EAAU6B,CAAE,CAAA,IAAA,EAAQ,UAAU,CAC9BpC,CAAAA,CAAAA,CAAU,MAAM,CAAA,CAChBW,EAAU7D,CAAO,CAAA,IAAI,EACrB,GAAGmE,CAAAA,CAAcnE,CAAM,CACxB,CAAC,CACSsF,CAAAA,CAAAA,CAAE,SAAW,MACvBD,GAAAA,CAAAA,CAAMjC,EAAK,CACVS,CAAAA,CAAU7D,EAAO,IAAI,CAAA,CACrBkD,CAAU,CAAA,QAAQ,EAClBQ,CAAW4B,CAAAA,CAAAA,CAAE,cAAc,CAC3B7B,CAAAA,CAAAA,CAAU6B,EAAE,IAAQ,EAAA,UAAU,EAC9BpC,CAAU,CAAA,MAAM,EAChBW,CAAU7D,CAAAA,CAAAA,CAAO,IAAI,CACrB,CAAA,GAAGmE,EAAcnE,CAAM,CACxB,CAAC,CAAA,EAEH,CACD,CAAC,CAAA,CACMqF,CACR,CAEO,SAASE,EAAuBZ,CAA6B,CAAA,CACnE,IAAM9E,CAAAA,CAAU4E,EAAkBE,CAAQ,CAAA,CACtCa,EAAQ,CAEZ,CAAA,IAAA,IAAWxF,KAAUH,CACpB,CAAA,GAAIG,CAAO,CAAA,IAAA,GAAS2E,EAAS,IAAQ3E,EAAAA,CAAAA,CAAO,MAAQ2E,CAAS,CAAA,GAAA,GAC5Da,IAEIA,CAAQ,CAAA,CAAA,CAAA,CACX,OAAO,CAAA,CAAA,CAKV,OAAO,CACR,CAAA,CAEO,SAASC,EAAad,CAAAA,CAAAA,CAAoB,CAGhD,OAFiBY,CAAAA,CAAuBZ,CAAQ,CAAA,CAGxCF,EAAkBE,CAAQ,CAAA,CAAE,IACjC3E,CAAsB,GAAA,CACtB,GAAG2E,CACH,CAAA,OAAA,CAAS,CAAC3E,CAAM,CACjB,CACD,CAAA,CAAA,CAEM,CAAC2E,CAAQ,CACjB,CC3kBae,IAAAA,CAAAA,CAA0B,CACtC,MAAA,CACA,QACA,MACA,CAAA,MAAA,CACA,OACA,SACA,CAAA,MAAA,CACA,OACA,IACA,CAAA,SAAA,CACA,UACA,CAAA,MAAA,CACA,OACA,aACA,CAAA,OAAA,CACA,OACA,QACD,EAQO,SAASC,CACfC,CAAAA,CAAAA,CAC+C,CAC/C,GAAI,CAACA,CAAQ,CAAA,OAAO,GACpB,IAAMC,CAAAA,CAAUD,EAAO,WAAY,EAAA,CACnC,OAAOF,CAAAA,CAAwB,KAAMI,CAAOD,EAAAA,CAAAA,CAAQ,SAASC,CAAE,CAAC,CACjE,CC9BO,SAASC,CAAUC,CAAAA,CAAAA,CAA0B,CACnD,OAAO,uBAAA,CAAwB,KAAKA,CAAO,CAC5C,CAEO,SAASC,EAAAA,CAAWL,CAAgB,CAAA,CAC1C,OAAO,wCAAyC,CAAA,IAAA,CAAKA,CAAM,CAC5D,CAEO,SAASM,CAAcF,CAAAA,CAAAA,CAAyB,CACtD,OAAKA,EACAD,CAAUC,CAAAA,CAAO,EACf,CAAGA,EAAAA,CAAAA,CAAQ,MAAM,CAAG,CAAA,CAAC,CAAC,CAAA,GAAA,EAAMA,EAAQ,KAAM,CAAA,CAAA,CAAE,CAAC,CADpBA,CAAAA,CAAAA,CAAAA,CADX,EAGtB,CAMO,SAASG,EAAmBH,CAAAA,CAAAA,CAAyB,CAC3D,OAAID,CAAAA,CAAUC,CAAO,CACbE,CAAAA,CAAAA,CAAcF,CAAO,CAGzBL,CAAAA,CAAAA,CAAcK,CAAO,CACjBA,CAAAA,CAAAA,CACL,MAAM,GAAG,CAAA,CACT,IAAKI,CAAkBF,EAAAA,CAAAA,CAAcE,CAAK,CAAC,CAAA,CAC3C,IAAK,CAAA,GAAG,EAGJJ,CACR,CAEO,SAASK,EAAmBL,CAAAA,CAAAA,CAAiBM,EAAsB,CACzE,OAAO,CAAgCN,6BAAAA,EAAAA,CAAO,MAAMM,CAAI,CAAA,CACzD,CCpBO,SAASC,EAAAA,CAAavG,EAAgB,CAC5C,IAAIqF,CAEJ,CAAA,OAAA9D,EAAevB,CAAQ,CAAA,CACtB,uBAAyBsF,CAAM,EAAA,CAC9BD,EAAMmB,CAAWlB,CAAAA,CAAC,EACnB,CAAA,CACA,uBAAyBA,CAAM,EAAA,CAC9BD,EAAMmB,CAAWlB,CAAAA,CAAC,EACnB,CACA,CAAA,kBAAA,CAAqBA,CAAM,EAAA,CAC1BD,EAAMmB,CAAWlB,CAAAA,CAAC,EACnB,CACA,CAAA,kBAAA,CAAqBA,GAAM,CAC1BD,CAAAA,CAAMmB,CAAWlB,CAAAA,CAAC,EACnB,CACA,CAAA,mBAAA,CAAsBA,GAAM,CAC3BD,CAAAA,CAAMmB,EAAWlB,CAAC,EACnB,CACD,CAAC,EAEMD,CACR,CAEO,SAASmB,CACflB,CAAAA,CAAAA,CACC,CACD,OAAO,CACN,OAASA,CAAAA,CAAAA,CAAE,QACX,EAAIA,CAAAA,CAAAA,CAAE,GACN,GAAKA,CAAAA,CAAAA,CAAE,eACP,KAAOA,CAAAA,CAAAA,CAAE,IACT,CAAA,QAAA,CAAUA,EAAE,QACb,CACD,CCjCO,SAASmB,EAAAA,CAAc9B,EAAoB,CACjD,GAAM,CAAC3E,CAAM,EAAI2E,CAAS,CAAA,OAAA,EAAW,EACrC,CAAA,OAAO3E,EAAS0G,CAAe/B,CAAAA,CAAAA,CAAU3E,CAAM,CAAA,CAAI,MACpD,CAEO,SAAS0G,EACf/B,CACA3E,CAAAA,CAAAA,CAC0B,CAC1B,IAAI6B,CAAAA,CACJ,OAAAN,CAAAA,CAAevB,EAAQ,CACtB,aAAA,CAAgBQ,GAAa,CAC5BqB,CAAAA,CAAU8E,EAAkBhC,CAAU3E,CAAAA,CAAAA,CAAQQ,CAAQ,EACvD,EACA,gBAAmBA,CAAAA,CAAAA,EAAa,CAC/BqB,CAAU8E,CAAAA,CAAAA,CAAkBhC,EAAU3E,CAAQQ,CAAAA,CAAQ,EACvD,CAAA,CACA,cAAgBA,CAAa,EAAA,CAC5BqB,EAAU8E,CAAkBhC,CAAAA,CAAAA,CAAU3E,EAAQQ,CAAQ,EACvD,CACA,CAAA,cAAA,CAAiBA,GAAa,CAC7BqB,CAAAA,CAAU8E,EAAkBhC,CAAU3E,CAAAA,CAAAA,CAAQQ,CAAQ,EACvD,CAAA,CACA,gBAAkBA,CAAa,EAAA,CAC9BqB,EAAU8E,CAAkBhC,CAAAA,CAAAA,CAAU3E,EAAQQ,CAAQ,EACvD,EACA,eAAkBA,CAAAA,CAAAA,EAAa,CAC9BqB,CAAAA,CAAU8E,EAAkBhC,CAAU3E,CAAAA,CAAAA,CAAQQ,CAAQ,EACvD,CACD,CAAC,CACMqB,CAAAA,CACR,CAKO,SAAS+E,EAAYC,CAAgBC,CAAAA,CAAAA,CAAe,CAC1D,GAAI,CAACD,EAAO,OAAOA,CAAAA,CAEnB,IAAME,CAAAA,CAASF,EAAM,UAAW,CAAA,QAAA,CAAK,EAAE,CAEvC,CAAA,OAAOC,GAAM,UAAWC,CAAAA,CAAM,CAAI,CAAA,KAAA,CAAA,CAAYA,CAC/C,CAEO,SAASC,GACfC,CACC,CAAA,CACD,OAAKA,CACD,CAAA,CAAA,EAAEA,CAAO,CAAA,IAAA,EAAUA,EAAO,KAAWA,EAAAA,CAAAA,CAAO,OAD5B,CAGrB,CAAA,CAEA,SAASN,CACRhC,CAAAA,CAAAA,CACA3E,CACAQ,CAAAA,CAAAA,CACc,CACd,IAAM0G,CAAAA,CAAM1G,EAAS,MACfyG,CAAAA,CAAAA,CAASC,EACZ,CACA,SAAA,CAAWA,CAAI,CAAA,SAAA,CACf,OAAQA,CAAI,CAAA,MAAA,CACZ,QAASlH,CAAO,CAAA,EAAA,CAChB,UAAWkH,CAAI,CAAA,SAAA,CACf,KAAON,CAAAA,CAAAA,CAAYM,EAAI,KAAOA,CAAAA,CAAAA,CAAI,IAAI,CACtC,CAAA,IAAA,CAAMA,EAAI,IACV,CAAA,KAAA,CAAOA,CAAI,CAAA,KACZ,EACC,KAGCD,CAAAA,CAAAA,CAAAA,EAAQ,OAAStC,CAAS,CAAA,OAAA,EAAS,aAAkB,GAAA,UAAA,GACxDsC,CAAO,CAAA,KAAA,CAAQA,EAAO,KAAM,CAAA,KAAA,CAAM,CAAC,CAEpC,CAAA,CAAA,IAAM5B,EAAM,CACX,SAAA,CAAW7E,CAAS,CAAA,SAAA,CACpB,OAAQA,CAAS,CAAA,MAAA,CACjB,QAASR,CAAO,CAAA,IAAA,CAChB,UAAWQ,CAAS,CAAA,SAAA,CACpB,KAAOoG,CAAAA,CAAAA,CAAYpG,EAAS,KAAOA,CAAAA,CAAAA,CAAS,IAAI,CAChD,CAAA,IAAA,CAAMA,EAAS,IACf,CAAA,KAAA,CAAOA,CAAS,CAAA,KAAA,CAChB,OAAQyG,CACT,CAAA,CAEA,OAAI5B,CAAI,CAAA,KAAA,EAASV,EAAS,OAAS,EAAA,WAAA,EAAkB,GAAA,UAAA,GACpDU,EAAI,KAAQA,CAAAA,CAAAA,CAAI,MAAM,KAAM,CAAA,CAAC,GAEvBA,CACR,CCzGO,SAAS8B,EAAAA,CAAexC,EAAoB,CAClD,OAAOA,EAAS,YAAiBA,GAAAA,CAAAA,CAAS,QAAQ,MACnD,KCJayC,EAAgB,CAAA,6CCEtB,SAASC,EAAW9C,CAAAA,CAAAA,CAA8B,CACxD,OAAO,CAAA,kCAAA,EAAqCA,CAAI,CACjD,IAAA,CAAA","file":"index.global.js","sourcesContent":["import type {\n\tAction,\n\tCollectibleApproval,\n\tCollectibleBurn,\n\tCollectibleMint,\n\tCollectibleTrade,\n\tCollectibleTransfer,\n\tExchangeLiquidity,\n\tExchangeStaking,\n\tExchangeSwap,\n\tMetaverseBurn,\n\tMetaverseMint,\n\tMetaverseTrade,\n\tMetaverseTransfer,\n\tSocialComment,\n\tSocialDelete,\n\tSocialMint,\n\tSocialPost,\n\tSocialProfile,\n\tSocialProxy,\n\tSocialRevise,\n\tSocialReward,\n\tSocialShare,\n\tStakeStaking,\n\tStakeTransaction,\n\tStakerProfitSnapshot,\n\tTransactionApproval,\n\tTransactionBridge,\n\tTransactionBurn,\n\tTransactionEvent,\n\tTransactionMint,\n\tTransactionTransfer,\n} from \"@rss3/api-core\";\n\nexport function renderItemActionToHTML(actions: Action[]): string | undefined {\n\tlet joint = \"\";\n\n\tlet i = 0;\n\tfor (const action of actions) {\n\t\tconst metadata = action.metadata;\n\t\tif (!metadata) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst { tag } = action;\n\t\tswitch (tag) {\n\t\t\tcase \"social\":\n\t\t\t\tjoint += renderSocialTagContent(action);\n\t\t\t\tbreak;\n\t\t\tcase \"collectible\":\n\t\t\t\tjoint += renderCollectibleTagContent(action);\n\t\t\t\tbreak;\n\t\t\tcase \"metaverse\":\n\t\t\t\tjoint += renderMetaverseTagContent(action);\n\t\t\t\tbreak;\n\t\t\tcase \"exchange\":\n\t\t\t\tjoint += renderExchange(action);\n\t\t\t\tbreak;\n\t\t\tcase \"transaction\":\n\t\t\t\tjoint += renderTransaction(action);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (i < actions.length - 1) joint += \"<br />\";\n\t\ti++;\n\t}\n\n\treturn joint;\n}\n\nconst renderTransaction = (action: Action) => {\n\tlet joint = \"\";\n\tconst { type } = action;\n\tconst tag = \"transaction\";\n\tswitch (type) {\n\t\tcase \"transfer\":\n\t\tcase \"burn\":\n\t\tcase \"mint\":\n\t\tcase \"approval\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<h4>Transaction ${\n\t\t\t\t\ttype.toUpperCase().at(0) + type.slice(1)\n\t\t\t\t}</h4>`,\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p><strong>Standard:</strong> ${metadata.standard}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Decimals:</strong> ${metadata.decimals}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"event\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Transaction Event</h4>\",\n\t\t\t\t/* html */ `<p><strong>Block Hash:</strong> ${metadata.block.hash}</p>`,\n\t\t\t\t/* html */ `<p><strong>Transaction Hash:</strong> ${metadata.transaction.hash}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"bridge\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Transaction Bridge</h4>\",\n\t\t\t\t/* html */ `<p><strong>Action:</strong> ${metadata.action}</p>`,\n\t\t\t\t/* html */ `<p><strong>Source Network:</strong> ${metadata.sourceNetwork}</p>`,\n\t\t\t\t/* html */ `<p><strong>Target Network:</strong> ${metadata.targetNetwork}</p>`,\n\t\t\t\tmetadata.token &&\n\t\t\t\t\t/* html */ `<p><strong>Token name:</strong> ${metadata.token.name}</p>`,\n\t\t\t\tmetadata.token &&\n\t\t\t\t\t/* html */ `<p><strong>Token Symbol:</strong> ${metadata.token.symbol}</p>`,\n\t\t\t\tmetadata.token &&\n\t\t\t\t\t/* html */ `<p><strong>Token Value:</strong> ${metadata.token.value}</p>`,\n\t\t\t\tmetadata.token &&\n\t\t\t\t\t/* html */ `<p><strong>Token Address:</strong> ${metadata.token.address}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn buildSectionFooterHTML(joint, action);\n};\n\nconst renderExchange = (action: Action) => {\n\tlet joint = \"\";\n\tconst { type } = action;\n\tconst tag = \"exchange\";\n\tswitch (type) {\n\t\tcase \"liquidity\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Exchange Liquidity</h4>\",\n\t\t\t\t/* html */ `<p><strong>Action:</strong> ${metadata.action}</p>`,\n\t\t\t\t/* html */ `<p>\n            <table>\n              <thead>\n                <tr>\n                  <th>Address</th>\n                  <th>Value</th>\n                  <th>Name</th>\n                  <th>Symbol</th>\n                  <th>Decimals</th>\n                  <th>Standard</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${metadata.tokens.map(\n\t\t\t\t\t\t\t\t\t(token) => /* html */ `<tr>\n                  <td>${token.address}</td>\n                  <td>${token.value}</td>\n                  <td>${token.name}</td>\n                  <td>${token.symbol}</td>\n                  <td>${token.decimals}</td>\n                  <td>${token.standard}</td>\n                </tr>`,\n\t\t\t\t\t\t\t\t)}\n              </tbody>\n          </table>\n        </p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"staking\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Exchange Liquidity</h4>\",\n\t\t\t\t/* html */ `<p><strong>Action:</strong> ${metadata.action}</p>`,\n\t\t\t\tmetadata.token &&\n\t\t\t\t\t/* html */ `<p>\n\n           <strong>Token:</strong>\n           <ul>\n            <li><strong>Address:</strong> ${metadata.token.address}</li>\n            <li><strong>Value:</strong> ${metadata.token.value}</li>\n            <li><strong>Name:</strong> ${metadata.token.name}</li>\n            <li><strong>Symbol:</strong> ${metadata.token.symbol}</li>\n            <li><strong>Decimals:</strong> ${metadata.token.decimals}</li>\n            <li><strong>Standard:</strong> ${metadata.token.standard}</li>\n           </ul>\n        </p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"swap\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Exchange Swap</h4>\",\n\t\t\t\t/* html */ metadata.from &&\n\t\t\t\t\t`<p><strong>From:</strong> ${metadata.from.address}</p>`,\n\t\t\t\t/* html */ metadata.to &&\n\t\t\t\t\t`<p><strong>To:</strong> ${metadata.to?.address}</p>`,\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn buildSectionFooterHTML(joint, action);\n};\n\nconst renderMetaverseTagContent = (action: Action) => {\n\tlet joint = \"\";\n\tconst { from, to, type } = action;\n\tconst tag = \"metaverse\";\n\tswitch (type) {\n\t\tcase \"burn\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Metaverse Burn</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"trade\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Metaverse Trade</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"mint\":\n\t\t\t{\n\t\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\t\tif (!metadata) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tjoint += buildHTML([\n\t\t\t\t\t/* html */ \"<h4>Metaverse Mint</h4>\",\n\t\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t\t]);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"transfer\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Metaverse Transfer</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn buildSectionFooterHTML(joint, action);\n};\nconst renderCollectibleTagContent = (action: Action) => {\n\tlet joint = \"\";\n\tconst { from, to, type } = action;\n\tconst tag = \"collectible\";\n\tswitch (type) {\n\t\tcase \"approval\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Collectible Approval</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\n\t\t\tbreak;\n\t\t}\n\t\tcase \"burn\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Collectible Burn</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"trade\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Collectible Trade</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"mint\":\n\t\t\t{\n\t\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\t\tif (!metadata) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tjoint += buildHTML([\n\t\t\t\t\t/* html */ \"<h4>Collectible Mint</h4>\",\n\t\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t\t]);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"transfer\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ \"<h4>Collectible Transfer</h4>\",\n\t\t\t\t/* html */ `<p><strong>Name:</strong> ${metadata.name}</p>`,\n\t\t\t\t/* html */ `<p><strong>Address:</strong> ${metadata.address}</p>`,\n\t\t\t\t/* html */ `<p><strong>Symbol:</strong> ${metadata.symbol}</p>`,\n\t\t\t\t/* html */ `<p><strong>Value:</strong> ${metadata.value}</p>`,\n\t\t\t\t/* html */ `<p>${from} --> ${to}</p>`,\n\t\t\t]);\n\t\t}\n\t}\n\n\treturn buildSectionFooterHTML(joint, action);\n};\n\nconst renderSocialTagContent = (action: Action) => {\n\tlet joint = \"\";\n\tconst { type } = action;\n\tconst tag = \"social\";\n\tswitch (type) {\n\t\tcase \"profile\": {\n\t\t\tbreak;\n\t\t}\n\t\tcase \"mint\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} mited a post</small><br/>`,\n\t\t\t\t/* html */ metadata.body,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"delete\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} deleted a post</small><br/>`,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"post\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata || !metadata.body) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += metadata.body;\n\t\t\tbreak;\n\t\t}\n\t\tcase \"comment\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata || !metadata.target) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} commented on ${metadata.target.handle}'s post</small><br/>`,\n\t\t\t\t/* html */ `<blockquote>${metadata.target.body}</blockquote>`,\n\t\t\t\t/* html */ `RT: ${metadata.body}`,\n\t\t\t\t/* html */ metadata.media\n\t\t\t\t\t?.map(\n\t\t\t\t\t\t(media) =>\n\t\t\t\t\t\t\t`<img src=\"${media.address}\" style=\"max-width:100%; height:auto;\"/>`,\n\t\t\t\t\t)\n\t\t\t\t\t.join(\"\"),\n\t\t\t]);\n\n\t\t\tbreak;\n\t\t}\n\t\tcase \"reward\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} rewarded a post</small><br/>`,\n\t\t\t\t/* html */ metadata.body,\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"revise\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} revised a post</small><br/>`,\n\t\t\t\t/* html */ metadata.body,\n\t\t\t]);\n\n\t\t\tbreak;\n\t\t}\n\t\tcase \"proxy\": {\n\t\t\tbreak;\n\t\t}\n\t\tcase \"share\": {\n\t\t\tconst metadata = extractMetadata(tag, type, action);\n\t\t\tif (!metadata || !metadata.target) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tjoint += buildHTML([\n\t\t\t\t/* html */ `<small>${metadata.handle} shared a post by <a href=\"${metadata.target.authorUrl}\" target=\"_blank\">${metadata.target.handle}</a></small><br/>`,\n\t\t\t\t/* html */ metadata.target?.body,\n\t\t\t\tmetadata.target.media\n\t\t\t\t\t?.map(\n\t\t\t\t\t\t(media) =>\n\t\t\t\t\t\t\t`<img src=\"${media.address}\" style=\"max-width:100%; height:auto;\"/>`,\n\t\t\t\t\t)\n\t\t\t\t\t.join(\"\"),\n\t\t\t]);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn joint;\n};\n\nfunction extractMetadata<T1 extends string, T2 extends string>(\n\t_tag: T1,\n\t_type: T2,\n\tdata: Action,\n): GetRSS3DataMetadata<T1, T2> | null {\n\tconst metadata = data.metadata;\n\tif (!metadata) {\n\t\treturn null;\n\t}\n\treturn data.metadata as GetRSS3DataMetadata<T1, T2>;\n}\n\nfunction buildHTML(arr: (string | boolean | undefined | null)[]): string {\n\treturn arr.filter(Boolean).join(\"\\n\");\n}\n\nconst buildSectionFooterHTML = (string: string, action: Action) =>\n\tbuildHTML([\n\t\tstring,\n\t\t!!action.platform && `<p><strong>Platform:</strong> ${action.platform}</p>`,\n\n\t\t/* html */ `<p><strong>Related URLs:</strong>\n      <ul><li>${action.relatedUrls\n\t\t\t\t.map((url) => `<a href=\"${url}\" target=\"_blank\">${url}</a>`)\n\t\t\t\t.join(\"</li><li>\")}</li></ul></p>`,\n\t]);\n\nexport type RSS3DataModels = {\n\tCollectibleApproval: CollectibleApproval;\n\tCollectibleBurn: CollectibleBurn;\n\tCollectibleMint: CollectibleMint;\n\tCollectibleTrade: CollectibleTrade;\n\tCollectibleTransfer: CollectibleTransfer;\n\tMetaverseBurn: MetaverseBurn;\n\tMetaverseMint: MetaverseMint;\n\tMetaverseTrade: MetaverseTrade;\n\tMetaverseTransfer: MetaverseTransfer;\n\tSocialComment: SocialComment;\n\tSocialDelete: SocialDelete;\n\tSocialMint: SocialMint;\n\tSocialPost: SocialPost;\n\tSocialProfile: SocialProfile;\n\tSocialProxy: SocialProxy;\n\tSocialRevise: SocialRevise;\n\tSocialReward: SocialReward;\n\tSocialShare: SocialShare;\n\tStakeStaking: StakeStaking;\n\tStakeTransaction: StakeTransaction;\n\tStakerProfitSnapshot: StakerProfitSnapshot;\n\tTransactionApproval: TransactionApproval;\n\tTransactionBridge: TransactionBridge;\n\tTransactionBurn: TransactionBurn;\n\tTransactionEvent: TransactionEvent;\n\tTransactionMint: TransactionMint;\n\tTransactionTransfer: TransactionTransfer;\n\tExchangeLiquidity: ExchangeLiquidity;\n\tExchangeStaking: ExchangeStaking;\n\tExchangeSwap: ExchangeSwap;\n};\nexport type GetRSS3DataMetadata<\n\tFirstKey extends string,\n\tSecondKey extends string,\n> = `${Capitalize<FirstKey>}${Capitalize<SecondKey>}` extends keyof RSS3DataModels\n\t? RSS3DataModels[`${Capitalize<FirstKey>}${Capitalize<SecondKey>}`]\n\t: null;\n","import type { Action } from \"@rss3/api-core\";\n\nimport type { MetadataDoc } from \"./doc.js\";\n\ntype Handlers = {\n\t[K in keyof MetadataDoc]: (metadata: MetadataDoc[K][\"ref\"]) => void;\n};\n\nexport function getTagType(action: Action) {\n\treturn `${action.tag}-${action.type}` as keyof Handlers;\n}\n\nexport function handleMetadata(action: Action, handlers: Partial<Handlers>) {\n\t// biome-ignore lint/suspicious/noExplicitAny: Use of any is necessary here\n\thandlers[getTagType(action)]?.(action.metadata as any);\n}\n\nexport { renderItemActionToHTML } from \"./parser.js\";\n","import type { Token, TokenType } from \"./token.js\";\n\nexport type Theme<T> = {\n\t[key in TokenType]: (content: string, meta?: Token[\"meta\"]) => T;\n};\n\nexport const themePlain: Theme<string> = {\n\thtml: (c) => JSON.stringify(ellipsis(stripHTMLTags(c))),\n\tname: (c) => JSON.stringify(c),\n\tplatform: (c) => c,\n\taddress: (c) => c,\n\tnetwork: (c) => JSON.stringify(c),\n\tnumber: (c) => c,\n\timage: () => \"\",\n\tsymbolImage: () => \"\",\n\tassetImage: () => \"\",\n\tsymbol: (c) => c,\n\ttext: (c) => c,\n\ttime: (c) => `[${c}]`,\n\tseparator: (c) => c,\n\tunknown: (c) => c,\n};\n\nfunction ellipsis(content: string, max = 50): string {\n\tlet result = content;\n\n\tif (/\\n/.test(content)) {\n\t\tresult = result.replace(/\\n[\\s\\S]+/g, \" \").trim();\n\t}\n\n\treturn result.length > max ? `${result.slice(0, max)}...` : result;\n}\n\nfunction stripHTMLTags(s: string) {\n\treturn s.replace(/<[^>]*>?/gm, \"\");\n}\n","export function formatTokenValue(amount_?: string | null, decimals?: number) {\n\tlet result = \"0.00\";\n\tlet money: string;\n\tlet amount = amount_;\n\n\tif (amount) {\n\t\tif (Number.isNaN(Number(amount)) || Number(amount) === 0) {\n\t\t\treturn \"0.00\";\n\t\t}\n\n\t\tif (Number(amount) > 0 && decimals !== undefined) {\n\t\t\tamount = formatUnits(amount, decimals);\n\t\t}\n\n\t\tconst matched = amount.match(/^(0.0+)(.*)/);\n\t\tif (Number(amount) > 0 && Number(amount) < 1) {\n\t\t\tmoney = matched\n\t\t\t\t? // biome-ignore lint/style/noNonNullAssertion: Already checked the matched value is not null\n\t\t\t\t\tmatched[1] + matched[2]!.slice(0, 3)\n\t\t\t\t: `0.${amount.split(\"0.\")[1]?.slice(0, 3) ?? \"0\"}`;\n\t\t} else {\n\t\t\tmoney = Number(Number(amount).toFixed(3)).toString();\n\t\t}\n\n\t\tif (!money.includes(\".\")) {\n\t\t\tmoney = Number(amount).toFixed(2);\n\t\t}\n\n\t\tresult = money.replace(/(\\d)(?=(\\d{3})+\\.\\d+)/g, \"$1,\");\n\t}\n\n\treturn result;\n}\n\nexport function formatUnits(bigNum: string, unit: number) {\n\treturn (\n\t\tbigNum.length > unit\n\t\t\t? `${bigNum.slice(0, bigNum.length - unit)}.${bigNum.slice(-unit)}`\n\t\t\t: `0.${\"0\".repeat(unit - bigNum.length)}${bigNum}`\n\t).replace(/0+$/, \"\");\n}\n\nexport function formatThousands(num: number) {\n\tif (Number.isNaN(num)) return num.toString();\n\n\tconst withDecimal = Number(num > 1 ? num.toFixed(2) : num.toFixed(4))\n\t\t.toString()\n\t\t.split(\".\");\n\n\tif (withDecimal.length > 0) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: Already checked the length of withDecimal is greater than 0\n\t\twithDecimal[0] = withDecimal[0]!.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\t}\n\n\treturn withDecimal.join(\".\");\n}\n\nexport function formatPrecision(num: number, n = 2) {\n\tconst scale = 10 ** n;\n\treturn Math.round(num * scale) / scale;\n}\n","import type { Action, Activity } from \"@rss3/api-core\";\n\nimport { formatTokenValue } from \"../number/index.js\";\n\nexport type TokenType =\n\t| \"text\" // plain text\n\t| \"html\" // html text\n\t| \"number\" // number value, such as token exchange rate\n\t| \"image\" // image url\n\t| \"symbolImage\" // symbol image url\n\t| \"assetImage\" // asset image url\n\t| \"symbol\" // short name for a token, such as BTC, ETH\n\t| \"address\" // wallet address or txn address, such as https://help.coinbase.com/en/coinbase/getting-started/crypto-education/what-is-a-transaction-hash-hash-id\n\t| \"name\" // name for NFT, etc\n\t| \"platform\" // platform name\n\t| \"network\" // network name\n\t| \"separator\" // separator for actions\n\t| \"time\" // time\n\t| \"unknown\"; // unknown data type to tokenize\n\nexport type Token = {\n\ttype: TokenType;\n\tcontent: string;\n\tmeta?: {\n\t\taddress?: string | null;\n\t\tnetwork?: string | null;\n\t\tid?: string | null;\n\t\tpreview?: string;\n\t};\n};\n\nexport function token(\n\ttype: Token[\"type\"],\n\tcontent = \"\",\n\tmeta?: Token[\"meta\"],\n): Token {\n\treturn { type, content, meta };\n}\n\nexport const tokenSpace = tokenText(\" \");\n\nexport const tokenSeparator = token(\"separator\", \"; \");\n\nexport function join(tokens: Token[], sep = tokenSpace): Token[] {\n\treturn tokens\n\t\t.reduce((acc, t) => {\n\t\t\tacc.push(sep, t);\n\t\t\treturn acc;\n\t\t}, [] as Token[])\n\t\t.slice(1);\n}\n\nexport function tokenText(t: string): Token {\n\treturn token(\"text\", t);\n}\n\nexport function tokenName(t: string): Token {\n\treturn token(\"name\", t);\n}\n\nexport function tokenImage(t: string | null | undefined) {\n\treturn token(\"image\", t || \"\");\n}\n\nexport function tokenNetwork(t: string | null | undefined) {\n\treturn token(\"network\", t || \"\");\n}\n\nexport function tokenTime(t: number) {\n\treturn token(\"time\", new Date(t * 1000).toJSON());\n}\n\nexport function tokenAddr(t: string | null | undefined) {\n\treturn token(\"address\", t || \"\");\n}\n\nexport function tokenHandle(\n\tt: string | null | undefined,\n\taddr: string | null | undefined,\n\tnetwork: string | null | undefined,\n) {\n\tif (!addr) return token(\"address\", t || \"\");\n\treturn token(\"address\", t || \"\", { address: addr, network: network || \"\" });\n}\n\nexport type TokenMetadata = {\n\tsymbol?: string;\n\tdecimals?: number;\n\timage?: string;\n\tvalue?: string | null;\n};\n\n// maximum value of uint256\nconst INFINITY_VALUE =\n\t\"115792089237316195423570985008687907853269984665640564039457584007913129639935\";\n\nexport function tokenValue(t: TokenMetadata | null | undefined) {\n\tif (!t) return [token(\"number\", \"0\")];\n\tif (t.value === INFINITY_VALUE)\n\t\treturn [token(\"number\", \"infinite\"), token(\"symbol\", t.symbol)];\n\treturn [\n\t\ttoken(\"symbolImage\", t.image),\n\t\ttoken(\"number\", formatTokenValue(t.value, t.decimals) || \"0\"),\n\t\ttoken(\"symbol\", t.symbol),\n\t];\n}\n\nexport function tokenPlatform(t: Activity | Action) {\n\tlet platform = \"\";\n\tif (t.platform) {\n\t\tplatform = t.platform;\n\t\treturn [tokenText(\"on\"), token(\"platform\", platform)];\n\t}\n\treturn [];\n}\n\nexport function tokenPost(t: Action) {\n\tif (t.tag !== \"social\") {\n\t\treturn tokenText(\"\");\n\t}\n\n\tif (t.metadata) {\n\t\tif (\n\t\t\t\"title\" in t.metadata &&\n\t\t\tt.metadata.title &&\n\t\t\t!(t.platform === \"Lens\" && t.metadata.title)\n\t\t) {\n\t\t\treturn token(\"html\", t.metadata.title);\n\t\t}\n\n\t\tif (\"body\" in t.metadata && t.metadata.body) {\n\t\t\treturn token(\"html\", t.metadata.body);\n\t\t}\n\n\t\tif (\n\t\t\t\"target\" in t.metadata &&\n\t\t\tt.metadata.target &&\n\t\t\t\"body\" in t.metadata.target &&\n\t\t\t// FIXME: remove ts-ignore after GI fixing the type\n\t\t\t// @ts-ignore target is not null\n\t\t\tt.metadata.target.body\n\t\t) {\n\t\t\t// @ts-ignore target is not null\n\t\t\treturn token(\"html\", t.metadata.target.body);\n\t\t}\n\t}\n\n\treturn token(\"html\", \"\");\n}\n\nexport function tokenAsset(name: string, meta?: Token[\"meta\"]) {\n\tconst img = meta?.preview;\n\tif (img) {\n\t\treturn [token(\"assetImage\", img), token(\"name\", name, meta)];\n\t}\n\treturn [token(\"name\", name, meta)];\n}\n","import type { Action, Activity } from \"@rss3/api-core\";\n\nimport { handleMetadata } from \"../../metadata/index.js\";\nimport { type Theme, themePlain } from \"./theme.js\";\nimport {\n\ttype Token,\n\tjoin,\n\ttoken,\n\ttokenAddr,\n\ttokenAsset,\n\ttokenHandle,\n\ttokenImage,\n\ttokenName,\n\ttokenNetwork,\n\ttokenPlatform,\n\ttokenPost,\n\ttokenSeparator,\n\ttokenSpace,\n\ttokenText,\n\ttokenTime,\n\ttokenValue,\n} from \"./token.js\";\n\nexport * from \"./theme.js\";\n\nexport function getSummaryActions({ actions, tag, type }: Activity): Action[] {\n\tif (!actions) return [];\n\tif (actions.length === 1) return actions;\n\n\tconst list = [\"transaction-multisig\"];\n\n\treturn list.includes(`${tag}-${type}`)\n\t\t? actions\n\t\t: actions.filter((t) => t.tag === tag && t.type === type);\n}\n\nexport function formatPlain(activity: Activity): string {\n\tconst list = format(activity, themePlain).filter((s) => s !== \"\");\n\n\tconst clean: string[] = [];\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (list[i] === \" \" && list[i + 1] === \" \") continue;\n\t\tclean.push(list[i] ?? \"\");\n\t}\n\n\treturn clean.join(\"\");\n}\n\n/**\n * Format an activity into a list of tokens that can be used to custom render the output of a activity, such as CLI output.\n */\nexport function format<T>(activity: Activity, theme: Theme<T>): T[] {\n\tconst ts = tokenizeActivity(activity);\n\treturn ts.map((t) => {\n\t\tif (!theme[t.type]) {\n\t\t\treturn theme.unknown(t.content);\n\t\t}\n\n\t\treturn theme[t.type](t.content);\n\t});\n}\n\n/**\n * Returns a list of tokens that can be used to custom render the output of a activity, such as CLI output\n * all the symbols in blue color.\n */\nexport function tokenizeActivity(activity: Activity): Token[] {\n\tconst actions = getSummaryActions(activity);\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn tokenizeAction(activity, actions[0]!);\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [token(\"unknown\", \"Carried out an activity\")];\n\t}\n\n\tconst tokens = actions.reduce((acc, action) => {\n\t\tif (acc.length > 0) {\n\t\t\tacc.push(tokenSeparator);\n\t\t}\n\n\t\tacc.push(...tokenizeAction(activity, action));\n\n\t\treturn acc;\n\t}, [] as Token[]);\n\n\t// biome-ignore lint/style/noNonNullAssertion: FIXME: Remove the non-null assertion once GI's OpenAPI spec is updated\n\ttokens.push(tokenSpace, tokenTime(activity.timestamp!));\n\n\treturn tokens;\n}\n\nexport function tokenizeToActions(activity: Activity): Token[][] {\n\tconst actions = activity.actions ?? [];\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn [tokenizeAction(activity, actions[0]!)];\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [[token(\"unknown\", \"Carried out an activity\")]];\n\t}\n\n\treturn actions.map((action) => tokenizeAction(activity, action));\n}\n\nexport function tokenizeToSummaryActions(activity: Activity): Token[][] {\n\tconst actions = getSummaryActions(activity);\n\n\t// used for social actions, remove the duplicate action\n\tif (activity.tag === \"social\" && actions.length > 1) {\n\t\t// biome-ignore lint/style/noNonNullAssertion: The actions[0] is not null here\n\t\treturn [tokenizeAction(activity, actions[0]!)];\n\t}\n\n\t// handle unknown activity\n\tif (activity.tag === \"unknown\" || activity.type === \"unknown\") {\n\t\treturn [[token(\"unknown\", \"Carried out an activity\")]];\n\t}\n\n\treturn actions.map((action) => tokenizeAction(activity, action));\n}\n\n/**\n * Returns a list of tokens that can be used to custom render the output of an action, such as CLI output\n */\nexport function tokenizeAction(activity: Activity, action: Action): Token[] {\n\tconst direction = activity.direction;\n\tlet res = [tokenText(\"Carried out an activity\")];\n\thandleMetadata(action, {\n\t\t\"transaction-transfer\": (m) => {\n\t\t\tif (direction === \"in\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\ttokenText(\"received\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sent\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"transaction-approval\": (m) => {\n\t\t\tif (m.action === \"approve\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"revoked the approval of\"),\n\t\t\t\t\t...tokenValue(m),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"transaction-mint\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\t...tokenValue(m),\n\t\t\t]);\n\t\t},\n\t\t\"transaction-burn\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\t...tokenValue(m),\n\t\t\t]);\n\t\t},\n\t\t\"transaction-bridge\": (m) => {\n\t\t\tlet network: Token[] = [];\n\t\t\tif (m.sourceNetwork) {\n\t\t\t\tnetwork = [\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenNetwork(m.sourceNetwork),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenNetwork(m.targetNetwork),\n\t\t\t\t];\n\t\t\t}\n\t\t\tif (m.action === \"deposit\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"deposited\"),\n\t\t\t\t\t...tokenValue(m.token),\n\t\t\t\t\t...network,\n\t\t\t\t\t...tokenPlatform(activity),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"withdrew\"),\n\t\t\t\t\t...tokenValue(m.token),\n\t\t\t\t\t...network,\n\t\t\t\t\t...tokenPlatform(activity),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t// for collectible or nft related action, it will use image_url as the image link\n\t\t\"collectible-transfer\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"transferred\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-approval\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tif (m.action === \"approve\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\t...tokenAsset(m.name || \"collection\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"revoked the approval of\"),\n\t\t\t\t\t...tokenAsset(m.name || \"collection\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"collectible-mint\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-burn\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t]);\n\t\t},\n\t\t\"collectible-trade\": (m) => {\n\t\t\tconst meta = {\n\t\t\t\taddress: m.address,\n\t\t\t\tid: m.id,\n\t\t\t\tnetwork: activity.network,\n\t\t\t\tpreview: m.parsedImageUrl,\n\t\t\t};\n\t\t\tif (m.action === \"buy\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\ttokenText(\"bought\"),\n\t\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sold\"),\n\t\t\t\t\t...tokenAsset(m.name || \"an asset\", meta),\n\t\t\t\t\ttokenText(\"to\"),\n\t\t\t\t\ttokenAddr(action.to),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"exchange-swap\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"swapped\"),\n\t\t\t\t...tokenValue(m.from),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\t...tokenValue(m.to),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t// todo add the action invoker\n\t\t\"exchange-liquidity\": (m) => {\n\t\t\tconst tokens = m.tokens\n\t\t\t\t.flatMap((t) => join([...tokenValue(t), tokenText(\",\")]))\n\t\t\t\t.slice(0, -1);\n\t\t\tif (m.action === \"add\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"added\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"remove\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"removed\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"collect\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"collected\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"borrow\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"borrowed\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"repay\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"repaid\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"supply\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"supplied\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"to liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"withdraw\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"withDrew\"),\n\t\t\t\t\t...tokens,\n\t\t\t\t\ttokenText(\"from liquidity\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"social-post\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenHandle(m.handle || action.from, action.from, activity.network),\n\t\t\t\ttokenText(\"published a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-comment\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenHandle(m.handle || action.from, action.from, activity.network),\n\t\t\t\ttokenText(\"made a comment\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-share\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"shared a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-mint\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-revise\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\ttokenText(\"revised a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-profile\": (m) => {\n\t\t\tif (m.action === \"create\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"created a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"update\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"updated a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"renew\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"renewed a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"wrap\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"wrapped a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"unwrap\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(m.handle || action.from),\n\t\t\t\t\ttokenText(\"unwrapped a profile\"),\n\t\t\t\t\ttokenImage(m.imageUri),\n\t\t\t\t\ttokenName(m.name || m.handle || \"\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"social-delete\": () => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"deleted a post\"),\n\t\t\t\ttokenPost(action),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"social-proxy\": (m) => {\n\t\t\tif (m.action === \"appoint\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"approved a proxy\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"removed a proxy\"),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t\t\"metaverse-transfer\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"transferred\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\ttokenText(\"to\"),\n\t\t\t\ttokenAddr(action.to),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-mint\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"minted\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-burn\": (m) => {\n\t\t\tres = join([\n\t\t\t\ttokenAddr(action.from),\n\t\t\t\ttokenText(\"burned\"),\n\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t...tokenPlatform(action),\n\t\t\t]);\n\t\t},\n\t\t\"metaverse-trade\": (m) => {\n\t\t\tif (m.action === \"buy\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"bought\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"sell\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"sold\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t} else if (m.action === \"list\") {\n\t\t\t\tres = join([\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\ttokenText(\"listed\"),\n\t\t\t\t\ttokenImage(m.parsedImageUrl),\n\t\t\t\t\ttokenName(m.name || \"an asset\"),\n\t\t\t\t\ttokenText(\"from\"),\n\t\t\t\t\ttokenAddr(action.from),\n\t\t\t\t\t...tokenPlatform(action),\n\t\t\t\t]);\n\t\t\t}\n\t\t},\n\t});\n\treturn res;\n}\n\nexport function hasMultiPrimaryActions(activity: Activity): boolean {\n\tconst actions = getSummaryActions(activity);\n\tlet count = 0;\n\n\tfor (const action of actions) {\n\t\tif (action.type === activity.type && action.tag === activity.tag) {\n\t\t\tcount++;\n\n\t\t\tif (count > 1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\nexport function flatActivity(activity: Activity) {\n\tconst hasMulti = hasMultiPrimaryActions(activity);\n\n\tif (hasMulti) {\n\t\treturn getSummaryActions(activity).map(\n\t\t\t(action): Activity => ({\n\t\t\t\t...activity,\n\t\t\t\tactions: [action],\n\t\t\t}),\n\t\t);\n\t}\n\treturn [activity];\n}\n","export const SUPPORTED_NAME_SERVICES = [\n\t\".eth\",\n\t\".lens\",\n\t\".csb\",\n\t\".bnb\",\n\t\".bit\",\n\t\".crypto\",\n\t\".zil\",\n\t\".nft\",\n\t\".x\",\n\t\".wallet\",\n\t\".bitcoin\",\n\t\".dao\",\n\t\".888\",\n\t\".blockchain\",\n\t\".avax\",\n\t\".arb\",\n\t\".cyber\",\n] as const;\n\nexport type SupportedNameService = (typeof SUPPORTED_NAME_SERVICES)[number];\n\n/**\n * Check if the handle's name service is supported.\n * @param handle\n */\nexport function isSupportedNS(\n\thandle?: string | null,\n): handle is `${string}${SupportedNameService}` {\n\tif (!handle) return false;\n\tconst _handle = handle.toLowerCase();\n\treturn SUPPORTED_NAME_SERVICES.some((ns) => _handle.endsWith(ns));\n}\n","import { isSupportedNS } from \"../../name-service.js\";\n\nexport function isAddress(address: string): boolean {\n\treturn /^(0x)?[\\dA-Fa-f]{40}$/.test(address);\n}\n\nexport function isMastodon(handle: string) {\n\treturn /^\\w{1,30}@[\\d.A-Za-z-]+\\.[A-Za-z]{2,}$/.test(handle);\n}\n\nexport function formatAddress(address: string): string {\n\tif (!address) return \"\";\n\tif (!isAddress(address)) return address;\n\treturn `${address.slice(0, 6)}...${address.slice(-4)}`;\n}\n\n/**\n * it will format the address, eg: 0x1234567890abcdef1234567890abcdef12345678 -> 0x1234...5678\n * also format the long handle, eg: 0x1234567890abcdef1234567890abcdef12345678.csb -> 0x1234...5678.csb\n */\nexport function formatAddressAndNS(address: string): string {\n\tif (isAddress(address)) {\n\t\treturn formatAddress(address);\n\t}\n\n\tif (isSupportedNS(address)) {\n\t\treturn address\n\t\t\t.split(\".\")\n\t\t\t.map((value: string) => formatAddress(value))\n\t\t\t.join(\".\");\n\t}\n\n\treturn address;\n}\n\nexport function addressToAvatarURL(address: string, size: number): string {\n\treturn `https://cdn.stamp.fyi/avatar/${address}?s=${size}`;\n}\n","import type {\n\tAction,\n\tCollectibleApproval,\n\tCollectibleTrade,\n\tCollectibleTransfer,\n} from \"@rss3/api-core\";\n\nimport { handleMetadata } from \"../../metadata/index.js\";\n\nexport type BriefAsset = {\n\tcontract?: string | null;\n\tid?: string | null;\n\turl?: string;\n\ttitle?: string;\n\tdescription?: string;\n};\n\nexport function extractAsset(action: Action) {\n\tlet res: BriefAsset | undefined;\n\n\thandleMetadata(action, {\n\t\t\"collectible-transfer\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-approval\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-mint\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-burn\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t\t\"collectible-trade\": (m) => {\n\t\t\tres = extractNFT(m);\n\t\t},\n\t});\n\n\treturn res;\n}\n\nexport function extractNFT(\n\tm: CollectibleTransfer | CollectibleTrade | CollectibleApproval,\n) {\n\treturn {\n\t\taddress: m.address,\n\t\tid: m.id,\n\t\turl: m.parsedImageUrl,\n\t\ttitle: m.name,\n\t\tstandard: m.standard,\n\t};\n}\n","import type { Action, Activity, SocialPost } from \"@rss3/api-core\";\n\nimport { handleMetadata } from \"../../metadata/index.js\";\n\nexport type Content = {\n\tauthorUrl?: string;\n\thandle?: string;\n\taddress?: string;\n\tprofileId?: string | number | null;\n\ttitle?: string;\n\tbody?: string;\n\tmedia?: SocialPost[\"media\"];\n};\n\nexport type PostContent = Content & {\n\ttarget?: Content;\n};\n\nexport function formatContent(activity: Activity) {\n\tconst [action] = activity.actions ?? [];\n\treturn action ? extractContent(activity, action) : undefined;\n}\n\nexport function extractContent(\n\tactivity: Activity,\n\taction: Action,\n): PostContent | undefined {\n\tlet content: PostContent | undefined;\n\thandleMetadata(action, {\n\t\t\"social-post\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t\t\"social-comment\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t\t\"social-mint\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t\t\"social-share\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t\t\"social-revise\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t\t\"social-delete\": (metadata) => {\n\t\t\tcontent = extractSocialPost(activity, action, metadata);\n\t\t},\n\t});\n\treturn content;\n}\n\n/**\n * The special case for lens post, which will use the first sentence of the body as the title\n */\nexport function formatTitle(title?: string, body?: string) {\n\tif (!title) return title;\n\n\tconst _title = title.replaceAll(\"\", \"\");\n\n\treturn body?.startsWith(_title) ? undefined : _title;\n}\n\nexport function checkTargetExist(\n\ttarget?: Pick<Content, \"body\" | \"media\" | \"title\">,\n) {\n\tif (!target) return false;\n\tif (!!target.body || !!target.media || !!target.title) return true;\n\treturn false;\n}\n\nfunction extractSocialPost(\n\tactivity: Activity,\n\taction: Action,\n\tmetadata: SocialPost,\n): PostContent {\n\tconst raw = metadata.target;\n\tconst target = raw\n\t\t? {\n\t\t\t\tauthorUrl: raw.authorUrl,\n\t\t\t\thandle: raw.handle,\n\t\t\t\taddress: action.to,\n\t\t\t\tprofileId: raw.profileId,\n\t\t\t\ttitle: formatTitle(raw.title, raw.body),\n\t\t\t\tbody: raw.body,\n\t\t\t\tmedia: raw.media,\n\t\t\t}\n\t\t: undefined;\n\t// remove the first media, which is the avatar of the author\n\t// this case only happens in mastodon\n\tif (target?.media && activity.network?.toLowerCase() === \"mastodon\") {\n\t\ttarget.media = target.media.slice(1);\n\t}\n\tconst res = {\n\t\tauthorUrl: metadata.authorUrl,\n\t\thandle: metadata.handle,\n\t\taddress: action.from,\n\t\tprofileId: metadata.profileId,\n\t\ttitle: formatTitle(metadata.title, metadata.body),\n\t\tbody: metadata.body,\n\t\tmedia: metadata.media,\n\t\ttarget: target,\n\t};\n\t// the same as the target\n\tif (res.media && activity.network?.toLowerCase() === \"mastodon\") {\n\t\tres.media = res.media.slice(1);\n\t}\n\treturn res;\n}\n","import type { Activity } from \"@rss3/api-core\";\n\nexport function isSpamActivity(activity: Activity) {\n\treturn activity.totalActions !== activity.actions.length;\n}\n","export const EMPTY_ADDRESS = \"0x0000000000000000000000000000000000000000\";\n","import type { Network, Tag } from \"@rss3/api-core\";\n\nexport function getIconURL(name: Tag | Network | string) {\n\treturn `https://assets.rss3.io/web3-icons/${name}.png`;\n}\n"]}