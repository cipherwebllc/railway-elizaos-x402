# Analytics Plugin

A comprehensive analytics platform for ElizaOS that integrates data from multiple providers (Birdeye, CoinMarketCap, Codex) to provide advanced token analysis, technical indicators, historical data, and account insights.

## Features

### üîç Comprehensive Token Analytics
- **Price Analysis**: Real-time price data, 24h changes, volume, and market cap
- **Technical Indicators**: MACD, RSI, Bollinger Bands, Moving Averages, Volume analysis
- **Holder Analytics**: Token holder distribution, concentration risk, community growth (via Codex)
- **Sniper Analytics**: Sniper activity, profit analysis, top performers (via Codex)
- **Risk Assessment**: Volatility, liquidity, concentration, and technical risk evaluation
- **Trading Recommendations**: Buy/sell/hold signals with confidence levels and price targets

### üìä Account Analytics
- **Portfolio Performance**: Total value, PnL, best/worst performers
- **Risk Metrics**: Sharpe ratio, max drawdown, volatility
- **Trading History**: Win rate, trade analysis, position sizing
- **Portfolio Allocation**: Token distribution and diversification analysis

### üåç Market Analytics
- **Market Overview**: Total market cap, volume, sentiment
- **Top Gainers/Losers**: 24h performance leaders
- **Trending Tokens**: High-volume tokens and market movers
- **Market Sentiment**: Bullish/bearish/neutral indicators

### üìà Historical Analysis
- **Price Trends**: Historical price movement and patterns
- **Volume Analysis**: Volume trends and on-balance volume
- **Technical Trends**: Moving average crossovers and trend analysis
- **Timeframe Support**: 1h, 4h, 1d, 1w, 1m intervals

## Data Providers

### Birdeye (Solana)
- Token price data and market information
- Historical price data
- Account/wallet analytics
- Market trends and rankings

### CoinMarketCap (Multi-chain)
- Token price data across multiple chains
- Historical price data
- Market cap and volume information
- Global market metrics

### Codex (Solana)
- Token holder analytics and distribution
- Sniper activity and profit analysis
- Community growth metrics
- Wallet performance data

## Technical Indicators

### Core Indicators
- **MACD**: Moving Average Convergence Divergence
- **RSI**: Relative Strength Index
- **Bollinger Bands**: Volatility and trend analysis
- **Moving Averages**: SMA (20, 50, 200) and EMA (12, 26)

### Advanced Indicators
- **Volume Analysis**: Volume SMA, volume ratio, on-balance volume
- **Stochastic Oscillator**: Momentum and overbought/oversold conditions
- **ATR**: Average True Range for volatility measurement
- **Williams %R**: Momentum oscillator
- **CCI**: Commodity Channel Index
- **MFI**: Money Flow Index
- **Parabolic SAR**: Trend following indicator
- **ADX**: Average Directional Index

## Installation

```bash
npm install @elizaos/plugin-analytics
```

Or if using bun:

```bash
bun add @elizaos/plugin-analytics
```

## Configuration

### Required API Keys

Add these to your `.env` file:

```env
BIRDEYE_API_KEY=your_birdeye_api_key_here
COINMARKETCAP_API_KEY=your_cmc_api_key_here (optional)
CODEX_API_KEY=your_codex_api_key_here (optional)
```

### Plugin Registration

In your ElizaOS project, import and register the plugin:

```typescript
import { analyticsPlugin } from '@elizaos/plugin-analytics';

const runtime = new AgentRuntime({
    plugins: [
        analyticsPlugin,
        // ... other plugins
    ],
});
```

## Usage

### Actions

The plugin provides several actions that can be invoked by the agent:

#### `GET_TOKEN_ANALYTICS`
Get comprehensive analytics for a specific token.

```typescript
// Example usage in natural language:
"Analyze token 0x1234567890abcdef"
"Show me analytics for SOL"
"Get comprehensive analysis with technical indicators"
```

**Parameters:**
- `tokenAddress` (required): The token address to analyze
- `chain`: Blockchain chain (solana, ethereum, base) - default: solana
- `timeframe`: Analysis timeframe (1h, 4h, 1d, 1w, 1m) - default: 1d
- `includeHistorical`: Include historical data - default: true
- `includeHolders`: Include holder analytics - default: true
- `includeSnipers`: Include sniper analytics - default: true

#### `GET_ACCOUNT_ANALYTICS`
Get comprehensive analytics for a wallet account.

```typescript
// Example usage in natural language:
"Show me my account analytics"
"Analyze my portfolio performance"
"Get my trading history and win rate"
```

**Parameters:**
- `walletAddress` (optional): Wallet address (uses current user if not provided)
- `chain`: Blockchain chain - default: solana

#### `GET_MARKET_ANALYTICS`
Get market analytics including top gainers, losers, and trending tokens.

```typescript
// Example usage in natural language:
"Show me top gainers and losers"
"Get market overview for Solana"
"Display trending tokens"
```

**Parameters:**
- `chain`: Blockchain chain - default: solana

#### `GET_HISTORICAL_ANALYTICS`
Get historical analytics for a token.

```typescript
// Example usage in natural language:
"Show historical data for the last 30 days"
"Analyze price trends over the past week"
```

**Parameters:**
- `tokenAddress` (required): The token address to analyze
- `chain`: Blockchain chain - default: solana
- `timeframe`: Analysis timeframe - default: 1d

#### `GET_TECHNICAL_INDICATORS`
Get detailed technical indicators for a token.

```typescript
// Example usage in natural language:
"Show me technical indicators for SOL"
"What are the RSI and MACD values?"
"Analyze technical indicators for 0x1234567890abcdef"
```

**Parameters:**
- `tokenAddress` (required): The token address to analyze
- `chain`: Blockchain chain - default: solana
- `timeframe`: Analysis timeframe - default: 1d

### Providers

The plugin includes several providers that inject real-time data:

- **`ANALYTICS`**: Main analytics provider with comprehensive token analysis
- **`MARKET_DATA`**: Real-time market data and trends
- **`TECHNICAL_INDICATORS`**: Real-time technical indicators and signals
- **`HISTORICAL_DATA`**: Historical price data and trend analysis

### Services

The plugin registers three services:

- **`AnalyticsService`**: Main service orchestrating data from multiple providers
- **`MarketDataService`**: Service for fetching market data
- **`TechnicalAnalysisService`**: Service for calculating technical indicators

## Architecture

The analytics plugin follows a modular architecture:

1. **Providers**: Data source integrations (Birdeye, CoinMarketCap, Codex)
2. **Services**: Business logic and data orchestration
3. **Actions**: User-facing commands and interactions
4. **Utils**: Technical analysis calculations and utilities
5. **Interfaces**: Type definitions and data structures

## Development

### Building

```bash
bun run build
```

### Testing

```bash
bun run test
```

### Linting

```bash
bun run lint
```

## Error Handling

The plugin includes comprehensive error handling:

- Graceful degradation when providers are unavailable
- Fallback data and error messages
- Rate limiting and caching to prevent API abuse
- Input validation and data integrity checks

## Performance

- Intelligent caching with appropriate TTL values
- Rate limiting to respect API limits
- Parallel data fetching where possible
- Efficient technical indicator calculations

## License

MIT

## Contributing

Contributions are welcome! Please read the contributing guidelines before submitting PRs.

## Support

For issues and questions:
- GitHub Issues: [elizaos-plugins/plugin-analytics](https://github.com/elizaos-plugins/plugin-analytics/issues)
- Discord: [ElizaOS Community](https://discord.gg/elizaos)

